<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical href=https://btctranscripts.com/scalingbitcoin/tel-aviv-2019/edgedevplusplus/debugging-bitcoin/><title>Debugging Bitcoin | ₿itcoin Transcripts</title><link href=https://btctranscripts.com/css/fontawesome.min.css rel=stylesheet><link rel=stylesheet href=https://btctranscripts.com/css/ace.min.css><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://btctranscripts.com/images/btctranscripts.png"><meta name=twitter:title content="Debugging Bitcoin"><meta name=twitter:description content="Name: Fabian Jahr
Topic: Debugging Bitcoin
Location: Bitcoin Edge Dev++
Date: September 9th 2020
Video: https://www.youtube.com/watch?v=8bea0bdoFG0
Slides: https://telaviv2019.bitcoinedge.org/files/debugging-tools-for-bitcoin-core.pdf
Debugging Bitcoin Core: https://github.com/fjahr/debugging_bitcoin
Transcript completed by: Bryan Bishop Edited by: Michael Folkson
https://twitter.com/kanzure/status/1171024515490562048
Introduction I am going to talk about debugging Bitcoin. Of course if you want to contribute to Bitcoin there are a lot of conceptual things that you have to understand in order to do that. Most of the talks here today and tomorrow are about that."></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id=navbarMain><div class=container><div><a class=navbar-brand href=/>₿itcoin Transcripts</a></div><div class="collapse navbar-collapse" id=navbarMainCollapse><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/es>es</a></li><li class=nav-item><a class=nav-link href=/pt>pt</a></li><li class=nav-item><a class=nav-link href=/zh>zh</a></li><li class=nav-item><a class=nav-link href=https://github.com/bitcointranscripts/bitcointranscripts target=_blank><i class='fab fa-github'></i></a></li></ul></div></div></nav><div class=container-fluid><div class=row><div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0"><button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#sidenav-left-collapse aria-controls=sidenav-left-collapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse align-items-start flex-column" id=sidenav-left-collapse><form class="form-inline my-2 my-lg-0 searchbox"><input class="form-control mr-sm-2 w-100" data-search-input id=search-by type=text placeholder='Search (press "/")'></form><ul class="navbar-nav flex-column pt-3"><li data-nav-id=/adopting-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/adopting-bitcoin/><h6>Adopting Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/adopting-bitcoin/2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/adopting-bitcoin/2021/><h6>Adopting Bitcoin 2021</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/advancing-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/><h6>Advancing Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/advancing-bitcoin/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2019/><h6>Advancing Bitcoin 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/advancing-bitcoin/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2020/><h6>Advancing Bitcoin 2020</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/advancing-bitcoin/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2022/><h6>Advancing Bitcoin 2022</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/andreas-antonopoulos/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/andreas-antonopoulos/><h6>Andreas Antonopoulos</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/austin-bitcoin-developers/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/austin-bitcoin-developers/><h6>Austin Bitcoin Developers</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/baltic-honeybadger/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/baltic-honeybadger/><h6>Baltic Honeybadger</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/baltic-honeybadger/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/baltic-honeybadger/2018/><h6>Baltic Honeybadger 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/baltic-honeybadger/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/baltic-honeybadger/2019/><h6>Baltic Honeybadger 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bit-block-boom/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bit-block-boom/><h6>Bit Block Boom</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bit-block-boom/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bit-block-boom/2019/><h6>Bit Block Boom 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bitcoin-core-dev-tech/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/><h6>Bitcoin Core Dev Tech</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bitcoin-core-dev-tech/bitcoin-devcore-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/bitcoin-devcore-2015/><h6>Bitcoin Devcore Meetup (2015)</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bitcoin-design/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-design/><h6>Bitcoin Design</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-magazine/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-magazine/><h6>Bitcoin Magazine</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoinplusplus/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinplusplus/><h6>Bitcoin++</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bitcoinplusplus/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinplusplus/2022/><h6>Bitcoin++ 2022</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bitcoinology/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinology/><h6>Bitcoinology</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoinops/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinops/><h6>Bitcoinops</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bitcoinops/schnorr-taproot-workshop-2019/ class="nav-item my-1"><a class="nav-link p-0" href=/bitcoinops/schnorr-taproot-workshop-2019/><h6>Schnorr Taproot Workshop 2019</h6></a></li></ul></li><li data-nav-id=/blockchain-protocol-analysis-security-engineering/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockchain-protocol-analysis-security-engineering/><h6>Blockchain Protocol Analysis Security Eng</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/blockchain-protocol-analysis-security-engineering/2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockchain-protocol-analysis-security-engineering/2017/><h6>Blockchain Protocol Analysis Security Engineering 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/blockchain-protocol-analysis-security-engineering/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockchain-protocol-analysis-security-engineering/2018/><h6>Blockchain Protocol Analysis Security Engineering 2018</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/blockstream-webinars/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockstream-webinars/><h6>Blockstream Webinars</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/boltathon/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/boltathon/><h6>Boltathon</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/breaking-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/breaking-bitcoin/><h6>Breaking Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/breaking-bitcoin/2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/breaking-bitcoin/2017/><h6>Breaking Bitcoin 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/breaking-bitcoin/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/breaking-bitcoin/2019/><h6>Breaking Bitcoin 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/building-on-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/building-on-bitcoin/><h6>Building On Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/building-on-bitcoin/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/building-on-bitcoin/2018/><h6>Building On Bitcoin 2018</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/c-lightning/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/c-lightning/><h6>c-lightning</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/chaincode-labs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chaincode-labs/><h6>Chaincode Labs</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/chaincode-labs/chaincode-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chaincode-labs/chaincode-podcast/><h6>Chaincode Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/chaincode-labs/chaincode-residency/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chaincode-labs/chaincode-residency/><h6>Chaincode Residency</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/chicago-bitdevs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chicago-bitdevs/><h6>Chicago Bitdevs</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/coindesk-consensus-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/coindesk-consensus-2016/><h6>Coindesk Consensus</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/coordination-of-decentralized-finance-workshop/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/coordination-of-decentralized-finance-workshop/><h6>Coordination of Decentralized Finance</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/coordination-of-decentralized-finance-workshop/2020-stanford/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/coordination-of-decentralized-finance-workshop/2020-stanford/><h6>2020 Stanford</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/cppcon/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cppcon/><h6>CPPcon</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/cppcon/2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cppcon/2017/><h6>CPPcon 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/cppcon/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cppcon/2020/><h6>CPPcon 2020</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/cryptoeconomic-systems/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cryptoeconomic-systems/><h6>Cryptoeconomic Systems</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/cryptoeconomic-systems/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cryptoeconomic-systems/2019/><h6>Cryptoeconomic Systems 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/dallas-bitcoin-symposium/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/dallas-bitcoin-symposium/><h6>Dallas Bitcoin Symposium</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/decentralized-financial-architecture-workshop/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/decentralized-financial-architecture-workshop/><h6>Decentralized Financial Architecture Workshop</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-developers-miners-meeting-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-developers-miners-meeting-2016/><h6>Developers-Miners Meeting</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/greg-maxwell/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/greg-maxwell/><h6>Greg Maxwell</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/grincon/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/grincon/><h6>Grincon</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/grincon/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/grincon/2019/><h6>Grincon 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/honey-badger-diaries/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/honey-badger-diaries/><h6>Honey Badger Diaries</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/iacr/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/iacr/><h6>IACR Crypto</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/la-bitdevs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/la-bitdevs/><h6>LA Bitdevs</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/layer2-summit/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/layer2-summit/><h6>Layer2 Summit</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/layer2-summit/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/layer2-summit/2018/><h6>Layer2 Summit 2018</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/lets-talk-bitcoin-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lets-talk-bitcoin-podcast/><h6>Lets Talk Bitcoin Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/lightning-conference/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-conference/><h6>Lightning Conference</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/lightning-conference/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-conference/2019/><h6>Lightning Conference 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/lightning-hack-day/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-hack-day/><h6>Lightning Hack Day</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/lightning-specification/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-specification/><h6>Lightning Specification</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/london-bitcoin-devs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/london-bitcoin-devs/><h6>London Bitcoin Devs</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/magicalcryptoconference/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/magicalcryptoconference/><h6>Magicalcryptoconference</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/magicalcryptoconference/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/magicalcryptoconference/2019/><h6>Magicalcryptoconference 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/misc/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/misc/><h6>Misc</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/><h6>MIT Bitcoin Expo</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2015/><h6>Mit Bitcoin Expo 2015</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2016/><h6>Mit Bitcoin Expo 2016</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2017/><h6>Mit Bitcoin Expo 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2018/><h6>Mit Bitcoin Expo 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2019/><h6>Mit Bitcoin Expo 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2020/><h6>Mit Bitcoin Expo 2020</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2021/><h6>Mit Bitcoin Expo 2021</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/munich-meetup/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/munich-meetup/><h6>Munich Meetup</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/noded-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/noded-podcast/><h6>Noded Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/realworldcrypto/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/realworldcrypto/><h6>Realworldcrypto</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/realworldcrypto/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/realworldcrypto/2018/><h6>Realworldcrypto 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/realworldcrypto/2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/realworldcrypto/2021/><h6>Realworldcrypto 2021</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/rebooting-web-of-trust/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/rebooting-web-of-trust/><h6>Rebooting Web Of Trust</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/rebooting-web-of-trust/2019-prague/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/rebooting-web-of-trust/2019-prague/><h6>2019 Prague</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/ruben-somsen/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/ruben-somsen/><h6>Ruben Somsen</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/satoshi-roundtable/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/satoshi-roundtable/><h6>Satoshi Roundtable</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/satoshi-roundtable/sr-004/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/satoshi-roundtable/sr-004/><h6>Sr 004</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/scalingbitcoin/ class="nav-item my-1 parent haschildren"><a class="nav-link p-0" href=/scalingbitcoin/><h6>Scaling Bitcoin Conference</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/scalingbitcoin/hong-kong-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/hong-kong-2015/><h6>Hong Kong (2015)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/milan-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/milan-2016/><h6>Milan (2016)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/montreal-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/montreal-2015/><h6>Montreal (2015)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/stanford-2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/stanford-2017/><h6>Stanford (2017)</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/scalingbitcoin/stanford-2017/edgeplusplus/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/stanford-2017/edgeplusplus/><h6>Edgeplusplus</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/scalingbitcoin/tel-aviv-2019/ class="nav-item my-1 parent haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tel-aviv-2019/><h6>Tel Aviv (2019)</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/scalingbitcoin/tel-aviv-2019/edgedevplusplus/ class="nav-item my-1 parent haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tel-aviv-2019/edgedevplusplus/><h6>Edgedevplusplus</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/scalingbitcoin/tokyo-2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tokyo-2018/><h6>Tokyo (2018)</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/scalingbitcoin/tokyo-2018/edgedevplusplus/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tokyo-2018/edgedevplusplus/><h6>Edgedevplusplus</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li></ul></li><li data-nav-id=/sf-bitcoin-meetup/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/sf-bitcoin-meetup/><h6>SF Bitcoin Meetup</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/simons-institute/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/simons-institute/><h6>Simons Institute</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/stanford-blockchain-conference/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stanford-blockchain-conference/><h6>Stanford Blockchain</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/stanford-blockchain-conference/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stanford-blockchain-conference/2019/><h6>Stanford Blockchain Conference 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/stanford-blockchain-conference/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stanford-blockchain-conference/2020/><h6>Stanford Blockchain Conference 2020</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/stephan-livera-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stephan-livera-podcast/><h6>Stephan Livera Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/sydney-bitcoin-meetup/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/sydney-bitcoin-meetup/><h6>Sydney Bitcoin Meetup</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/tabconf/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tabconf/><h6>TABConf</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/tabconf/2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tabconf/2021/><h6>TABConf 2021</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/tabconf/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tabconf/2022/><h6>TABConf 2022</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/texas-bitcoin-conference-2014/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/texas-bitcoin-conference-2014/><h6>Texas Bitcoin Conference</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/tftc-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tftc-podcast/><h6>TFTC Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/verifiable-delay-functions/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/verifiable-delay-functions/><h6>Verifiable Delay Functions</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/verifiable-delay-functions/vdf-day-2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/verifiable-delay-functions/vdf-day-2019/><h6>Vdf Day 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/vr-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/vr-bitcoin/><h6>VR Bitcoin</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/w3-blockchain-workshop-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/w3-blockchain-workshop-2016/><h6>W3 Blockchain Workshop</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/wasabi-research-club/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/wasabi-research-club/><h6>Wasabi Research Club</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/what-bitcoin-did-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/what-bitcoin-did-podcast/><h6>What Bitcoin Did Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></div></nav></div><div class="docs-toc large order-lg-2 order-md-0 order-xs-1 col-12 col-lg-2 col-xl-2 position-sticky"><div class=docs-toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#welcome-to-bitcoin>Welcome to Bitcoin</a></li><li><a href=#part-1-preparations>Part 1: Preparations</a></li><li><a href=#logging>Logging</a></li><li><a href=#being-in-the-right-environment>Being in the right environment</a></li><li><a href=#logging-from-unit-tests>Logging from unit tests</a></li><li><a href=#unit-test-logging-in-action>Unit test logging in action</a></li><li><a href=#logging-from-functional-tests>Logging from functional tests</a></li><li><a href=#using-a-debugger>Using a debugger</a></li><li><a href=#debugger-from-own-environment>Debugger from own environment</a></li><li><a href=#also-works-for-unit-tests>Also works for unit tests</a></li><li><a href=#should-be-easy-for-functional-tests>Should be easy for functional tests…</a></li><li><a href=#where-is-the-bitcoind-process>Where is the bitcoind process?</a></li><li><a href=#gameplan>Gameplan</a></li><li><a href=#demo-time>Demo time!</a></li><li><a href=#debugging-contexts>Debugging contexts</a></li><li><a href=#segfault-tools>Segfault tools</a></li><li><a href=#valgrind>Valgrind</a></li><li><a href=#debugging-bitcoin-core-doc>Debugging Bitcoin Core doc</a></li><li><a href=#qa>Q&A</a></li></ul></nav></div></div><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-8 py-3"><a href=/>Home</a>
&lt; <a href=/scalingbitcoin/>Scaling Bitcoin Conference</a>
&lt; <a href=/scalingbitcoin/tel-aviv-2019/>Tel Aviv (2019)</a>
&lt; <a href=/scalingbitcoin/tel-aviv-2019/edgedevplusplus/>Edgedevplusplus</a>
&lt; Debugging Bitcoin<h1>Debugging Bitcoin</h1><p><i>Transcript By: Bryan Bishop</i></p><p>Category:
<a href=/categories/conference>Conference</a></p><p>Name: Fabian Jahr</p><p>Topic: Debugging Bitcoin</p><p>Location: Bitcoin Edge Dev++</p><p>Date: September 9th 2020</p><p>Video: <a href="https://www.youtube.com/watch?v=8bea0bdoFG0">https://www.youtube.com/watch?v=8bea0bdoFG0</a></p><p>Slides: <a href=https://telaviv2019.bitcoinedge.org/files/debugging-tools-for-bitcoin-core.pdf>https://telaviv2019.bitcoinedge.org/files/debugging-tools-for-bitcoin-core.pdf</a></p><p>Debugging Bitcoin Core: <a href=https://github.com/fjahr/debugging_bitcoin>https://github.com/fjahr/debugging_bitcoin</a></p><p>Transcript completed by: Bryan Bishop Edited by: Michael Folkson</p><p><a href=https://twitter.com/kanzure/status/1171024515490562048>https://twitter.com/kanzure/status/1171024515490562048</a></p><h1 id=introduction>Introduction</h1><p>I am going to talk about debugging Bitcoin. Of course if you want to contribute to Bitcoin there are a lot of conceptual things that you have to understand in order to do that. Most of the talks here today and tomorrow are about that. But actually writing code or fixing stuff, you will also have to learn some things on a practical level. That is what this talk is about. Even if you have a very good understanding already of how Bitcoin works on a conceptual level you can still run into these things that can block your process.</p><h1 id=welcome-to-bitcoin>Welcome to Bitcoin</h1><p>Welcome to Bitcoin. You are a junior Bitcoin Core developer and you have to take your first steps. That is what this talk is for. I’ll talk first about preparation that you are going to need in order to log or debug stuff from Bitcoin. Then we are going to talk about some tools. Tools for segfaults, I am going to touch on briefly.</p><h1 id=part-1-preparations>Part 1: Preparations</h1><p>First of all some hints on preparations. I really recommend you to install <a href=https://github.com/bitcoin/bitcoin/blob/master/doc/productivity.md#cache-compilations-with-ccache>ccache</a>. Ccache is a tool that is caching things that you have already compiled. This is going to speed up your process a lot when you are developing. You don’t waste time on it. Another thing that you should definitely do is set compiler flags and optimizations to zero.</p><p><code>./configure CXXFLAGS="-O0 -g" CFLAGS="-O0 -g”</code></p><p>Otherwise the debugging tools I am going to show you are not really going to work for you. They are going to work technically but you are not going to be able to recognize your code from it. I have an example of that later in the slides. I am going to hint at it but just make sure you do these things when you follow the further steps.</p><h1 id=logging>Logging</h1><p>We are going to start with logging. You can find all the information I am going to talk about by Googling or by reading README files on Bitcoin Core. Something that you are going to see recommended when you want to log something out of the code is this function <code>LogPrintf</code>. Let’s say you are starting out and you want to log something because you want to see whatever you edited in the code is actually doing something. You put this <code>LogPrintf</code> in, you compile, it works.</p><p><code>LogPrintf(“\@\@\@\@\@\@“);</code></p><p>You run <code>src/bitcoind -regtest</code> and it should run by this point where the <code>LogPrintf</code> is. This is logging to the <code>debug.log</code> file. But actually it is not working. You can see I am grepping for these @ signs.</p><p><code>cat ~/Library/Application\ Support/Bitcoin/debug.log | grep \@\@\@</code></p><p>Nothing is coming out. There is a problem here that you should be able to see from the slide. Does anyone see what the problem is? The problem is we are running regtest which you probably do if you are on your local environment. But this <code>debug.log</code> file is the mainnet <code>debug.log</code> file. This is the first hint of the main message of my talk. There are different environments, different contexts that you have to be aware of when you are developing locally. It is going to happen to you that you are going to be in the wrong context. You will forget where you are. When you <code>grep</code> for something, you do some fuzzy matching or so, you are going to miss something and you won’t see it. You have to check again. Am I in the right folder? Am I in the right file?</p><h1 id=being-in-the-right-environment>Being in the right environment</h1><p>If you are running something in regtest then here you need to find the <code>debug.log</code> file that is in the <code>regtest</code> folder and then you will see the output.</p><p><code>regtest/debug.log</code></p><h1 id=logging-from-unit-tests>Logging from unit tests</h1><p>(Run <code>src/test/test_bitcoin</code> directly with <code>--log-level=all</code>)</p><p>Moving onto unit tests I am going to go through logging and debugging. First running it yourself, then running unit tests, then running functional tests. With unit tests you cannot use <code>LogPrintf()</code>. Instead unit tests are running with Boost. You have to use these <code>BOOST_TEST_MESSAGE</code>. There is not really much more to it. You cannot run the normal bitcoind. There is another executable that is compiled just for the unit tests. That is <code>src/test/test_bitcoin</code>. You have to run that with <code>--log-level=all</code>. Then you are going to see all these messages.</p><h1 id=unit-test-logging-in-action>Unit test logging in action</h1><p>You can see that here as an example. There are other examples of these <code>BOOST_TEST_MESSAGE</code>. You can do these with asserts and so on. They are going to come out in the output as you can see there.</p><h1 id=logging-from-functional-tests>Logging from functional tests</h1><p>Logging from the functional test, especially if you already have some experience with Python this is really simple. This is not a compiled language so you don’t have to think about so many steps there. You just use this <code>self.log.info</code> method. You’ll see this all over the functional tests. This is probably not going to be hard for you.</p><p><code>self.log.info(“foo”)</code></p><p>Another thing that you have to think of though is you have to run the test directly and not through the test harness, <code>test_runner.py</code>. The test runner is not printing out these messages.</p><h1 id=using-a-debugger>Using a debugger</h1><p>How many here know what a debugger is? I’m going to run through it very quickly. Most people use debuggers like gdb or lldb. Maybe you are using it in a IDE or something like that. These are tools that everyone can use and that I have seen be used very commonly by Bitcoin developers. With these you start an executable through the debugger. You set breakpoints and then as you run the code the code runs into these breakpoints. You can inspect variables and step through lines of the code.</p><h1 id=debugger-from-own-environment>Debugger from own environment</h1><p><code>lldb src/bitcoind</code></p><p><code>(lldb) b blockchain.cpp:123</code></p><p><code>(lldb) run -regtest</code></p><p>This is straightforward if you know how to use gdb or lldb. When you use the bitcoind executable directly you just run bitcoind that you built with lldb. I am using MacOS. For MacOS lldb is definitely better. You can use gdb, gdb is better on Linux. It depends on your system. The two are very similar, just minor differences in the calls when you are inspecting stuff. You can set a breakpoint here in any file. You can also specify function names or something like that. Then your run the file with the parameters that you need and you will see the results that you want.</p><h1 id=also-works-for-unit-tests>Also works for unit tests</h1><p>It kind of works the same way for unit tests as well. The only thing that you have to remember is that you use the <code>test_bitcoin</code> executable and not bitcoind. Here you can see it in the example. You set a breakpoint in some file you are going to run into and then you run it. It is going to stop at the breakpoint.</p><h1 id=should-be-easy-for-functional-tests>Should be easy for functional tests…</h1><p>For functional tests, the logging was at least for me the easiest. Running functional tests and then running a debugger is pretty simple. You use pdb. That is the same as gdb but working for Python.</p><p><code>import pdb; pdb.set_trace()</code></p><p>You put this <code>import pdb</code> and then <code>pdb.set_trace()</code> into the code. It is going to stop there. I understood all of these things but then I had this idea that I wanted to inspect the C++ code that was being executed by the functional tests. This is where it gets really interesting. This is the most interesting thing I can teach you today. How do you get into debugging the C++ code?</p><h1 id=where-is-the-bitcoind-process>Where is the bitcoind process?</h1><p>The problem here is that the functional test which is Python code is launching and executing a bitcoind instance. This uses a temp folder as its datadir. It is hidden away from you. You cannot really interact with it in an easy way. To get in there you need a game plan. We are going to go through that game plan.</p><h1 id=gameplan>Gameplan</h1><p>First of all what you need to do is run the functional test (not using <code>test_runner.py</code> that is going to start the bitcoind process for you. Then you have to stop this test. For that we are going to use pdb.</p><p><code>pdb.set_trace()</code></p><p>Then we have to find the bitcoind process that we were running with the functional test and attach to that process using lldb. We have to let that process continue (<code>continue</code> in pdb) and it will run into our lldb breakpoint. One thing that we are also going to need to change is the timeout because functional tests have a timeout of 60 seconds. That is not going to give you a lot of time to debug if you keep that in place.</p><h1 id=demo-time>Demo time!</h1><p>That is something that I would like to show you here as a demo. First of all up here you can see that I have changed <code>rpc_timeout</code> from 60 seconds to 600. That should give us a little bit more time. Down here what we are looking at is the <code>getblockchaininfo</code> test. Everyone who has ever run a node for themselves and checked that they are syncing fine, that <code>getblockchaininfo</code> call is probably what they run. I have put in the pdb <code>set_trace</code> here. That is what we are going to run first. We have run into the <code>set_trace</code> from pdb. We have to know what process we want to attach to. This is critical because some tests are running more than one instance. How we can find that out is if you look at the test on <code>self</code> you have this array of nodes. We only have one node in this test but if you have several ones then you need to know which node you want to attach to. Then you can look at <code>process.pid</code> and that is going to give you the PID number that you want to inspect. Take that number and put it in here. Now lldb is attaching to this process in particular. We can set the breakpoints. This process is not running both from pdb and from lldb. I can set these breakpoints on it now. Here I can let it continue from the lldb side but it is still not really running because pdb is still blocking it. We can unblock it. Now we’ve run into that point here. Here we can inspect this. I am not going to show you everything, all the calls you can do with this. Now you can interact with this with lldb. What is really neat about this is that oftentimes you have these complicated setups of things that you want to inspect with Bitcoin. You don’t want to run through these things by hand all the time. Typically you can write a functional test which is going to be useful for you anyway. Then you can have the functional test always bring you to that setup point and inspect the things you need to.</p><p>I’ll repeat what I did. First of all we ran into this <code>pdb.set_trace()</code>. Then we jumped into the pdb breakpoint and we went over to lldb. We attached to the process with lldb, we set a breakpoint, let that process continue, let that process continue in pdb and then we run into the breakpoint with lldb.</p><h1 id=debugging-contexts>Debugging contexts</h1><p>As I said in the beginning my main point here was when you are logging and debugging with Bitcoin especially in the beginning there are lots of different contexts that you have to be aware of. You have to check if something is not working whether you are in the right file or in the right context. You need to use the right tool for the job. This is another overview.</p><p>See slide: <a href=https://telaviv2019.bitcoinedge.org/files/debugging-tools-for-bitcoin-core.pdf>https://telaviv2019.bitcoinedge.org/files/debugging-tools-for-bitcoin-core.pdf</a></p><h1 id=segfault-tools>Segfault tools</h1><p>Need to activate with <code>ulimit -c unlimited</code> and then run in same terminal session
Run program with segfault
Find core dump in <code>/cores/*</code>
Make sure to clean up afterwards</p><p>One more thing that I am not going to talk about in detail is if you are facing segfaults. I am not an expert on these tools yet but something for you to consider as well. You can use Core dumps if you are facing segfaults. For that to work, at least on MacOS, you have to specifically enable them using this <code>ulimit</code> call. You run the program and then you will find these Core dumps in your <code>/cores</code> folder. You need to make sure that you cleanup afterwards because these are huge files. You can clutter your disk pretty quickly.</p><h1 id=valgrind>Valgrind</h1><p>Inspections, used similar to lldb
<code>valgrind --leak-check=yes src/bitcoind -regtest</code></p><p>Another tool is Valgrind where you can run leak checks with it. This works similar to lldb.</p><h1 id=debugging-bitcoin-core-doc>Debugging Bitcoin Core doc</h1><p><a href=https://github.com/fjahr/debugging_bitcoin>https://github.com/fjahr/debugging_bitcoin</a></p><p>I promised I was going to give you something at the end. Here is a link to a doc I have created. This has everything that you have seen here in this talk and even more information. I know it is hard to grasp everything in this talk. You are going to need these tools when you run into problems. Most of this information you can find in READMEs in Bitcoin but it is scattered over 5 or 6 different README files in Core. Check this file out, read through it, see if it is helpful for you and happy to take feedback. Any questions?</p><h1 id=qa>Q&A</h1><p>Q - What is the <code>enable-debug</code> config option?</p><p>A - You mean in the compilation step? It is also turning off optimizations. I think it is not setting <code>O0</code>. I am not sure exactly what it says. I think it is working fine but some people mentioned that they were having problems with it. I also remember it wasn’t working for me initially. I found out that setting <code>O0</code> is the cleanest way to disable optimizations so that is what I am using. It is basically doing the same thing.</p><div class=row></div></div></div></div><script src=https://btctranscripts.com/lib/jquery.min.js></script>
<script src=https://btctranscripts.com/lib/popper.min.js></script>
<script src=https://btctranscripts.com/js/bootstrap.min.js></script>
<script type=text/javascript src=/plugins/lunr.min.js></script>
<script type=text/javascript src=/plugins/auto-complete.js></script>
<link href=/plugins/auto-complete.css rel=stylesheet><script type=text/javascript>var baseurl="https://btctranscripts.com/"</script><script type=text/javascript src=/plugins/search.js></script>
<script type=text/javascript src=https://btctranscripts.com/js/custom.js></script>
<script type=text/javascript src=/plugins/clipboard.js></script>
<script>new ClipboardJS(".btn")</script></body></html>