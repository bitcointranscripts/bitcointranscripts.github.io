<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical href=https://btctranscripts.com/breaking-bitcoin/2017/changing-consensus-rules-without-breaking-bitcoin/><title>Changing Consensus Rules Without Breaking Bitcoin | ₿itcoin Transcripts</title><link href=https://btctranscripts.com/css/fontawesome.min.css rel=stylesheet><link rel=stylesheet href=https://btctranscripts.com/css/ace.min.css><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://btctranscripts.com/images/btctranscripts.png"><meta name=twitter:title content="Changing Consensus Rules Without Breaking Bitcoin"><meta name=twitter:description content="Changing consensus rules without breaking bitcoin
Eric Lombrozo (CodeShark)
video: https://www.youtube.com/watch?v=0WCaoGiAOHE&t=32min9s
https://twitter.com/kanzure/status/1005822360321216512
Introduction I&rsquo;d like to talk about &mldr; we actually discovered we can replace the script completely with soft-forks.
It&rsquo;s important to note this quote from satoshi, from summer 2010: &ldquo;I don&rsquo;t believe a second compatible implementation will ever&rdquo; &mldr;&mldr;
Comparing open-source development to bitcoin&rsquo;s blockchain &mldr; a lot of the inspiration came from the development of open-source. All source code is public, analogous to all blockchain being public."></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id=navbarMain><div class=container><div><a class=navbar-brand href=/>₿itcoin Transcripts</a></div><div class="collapse navbar-collapse" id=navbarMainCollapse><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/es>es</a></li><li class=nav-item><a class=nav-link href=/pt>pt</a></li><li class=nav-item><a class=nav-link href=https://github.com/bitcointranscripts/bitcointranscripts target=_blank><i class='fab fa-github'></i></a></li></ul></div></div></nav><div class=container-fluid><div class=row><div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0"><button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#sidenav-left-collapse aria-controls=sidenav-left-collapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse align-items-start flex-column" id=sidenav-left-collapse><form class="form-inline my-2 my-lg-0 searchbox"><input class="form-control mr-sm-2 w-100" data-search-input id=search-by type=text placeholder='Search (press "/")'></form><ul class="navbar-nav flex-column pt-3"><li data-nav-id=/adopting-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/adopting-bitcoin/><h6>Adopting Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/adopting-bitcoin/2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/adopting-bitcoin/2021/><h6>Adopting Bitcoin 2021</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/advancing-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/><h6>Advancing Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/advancing-bitcoin/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2019/><h6>Advancing Bitcoin 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/advancing-bitcoin/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2020/><h6>Advancing Bitcoin 2020</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/advancing-bitcoin/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2022/><h6>Advancing Bitcoin 2022</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/andreas-antonopoulos/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/andreas-antonopoulos/><h6>Andreas Antonopoulos</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/austin-bitcoin-developers/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/austin-bitcoin-developers/><h6>Austin Bitcoin Developers</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/baltic-honeybadger/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/baltic-honeybadger/><h6>Baltic Honeybadger</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/baltic-honeybadger/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/baltic-honeybadger/2018/><h6>Baltic Honeybadger 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/baltic-honeybadger/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/baltic-honeybadger/2019/><h6>Baltic Honeybadger 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bit-block-boom/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bit-block-boom/><h6>Bit Block Boom</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bit-block-boom/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bit-block-boom/2019/><h6>Bit Block Boom 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bitcoin-core-dev-tech/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/><h6>Bitcoin Core Dev Tech</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bitcoin-core-dev-tech/bitcoin-devcore-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/bitcoin-devcore-2015/><h6>Bitcoin Devcore Meetup (2015)</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bitcoin-design/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-design/><h6>Bitcoin Design</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-magazine/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-magazine/><h6>Bitcoin Magazine</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoinplusplus/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinplusplus/><h6>Bitcoin++</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bitcoinplusplus/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinplusplus/2022/><h6>Bitcoin++ 2022</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bitcoinology/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinology/><h6>Bitcoinology</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoinops/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinops/><h6>Bitcoinops</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bitcoinops/schnorr-taproot-workshop-2019/ class="nav-item my-1"><a class="nav-link p-0" href=/bitcoinops/schnorr-taproot-workshop-2019/><h6>Schnorr Taproot Workshop 2019</h6></a></li></ul></li><li data-nav-id=/blockchain-protocol-analysis-security-engineering/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockchain-protocol-analysis-security-engineering/><h6>Blockchain Protocol Analysis Security Eng</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/blockchain-protocol-analysis-security-engineering/2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockchain-protocol-analysis-security-engineering/2017/><h6>Blockchain Protocol Analysis Security Engineering 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/blockchain-protocol-analysis-security-engineering/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockchain-protocol-analysis-security-engineering/2018/><h6>Blockchain Protocol Analysis Security Engineering 2018</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/blockstream-webinars/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockstream-webinars/><h6>Blockstream Webinars</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/boltathon/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/boltathon/><h6>Boltathon</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/breaking-bitcoin/ class="nav-item my-1 parent haschildren"><a class="nav-link p-0" href=/breaking-bitcoin/><h6>Breaking Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/breaking-bitcoin/2017/ class="nav-item my-1 parent haschildren"><a class="nav-link p-0" href=/breaking-bitcoin/2017/><h6>Breaking Bitcoin 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/breaking-bitcoin/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/breaking-bitcoin/2019/><h6>Breaking Bitcoin 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/building-on-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/building-on-bitcoin/><h6>Building On Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/building-on-bitcoin/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/building-on-bitcoin/2018/><h6>Building On Bitcoin 2018</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/c-lightning/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/c-lightning/><h6>c-lightning</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/chaincode-labs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chaincode-labs/><h6>Chaincode Labs</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/chaincode-labs/chaincode-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chaincode-labs/chaincode-podcast/><h6>Chaincode Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/chaincode-labs/chaincode-residency/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chaincode-labs/chaincode-residency/><h6>Chaincode Residency</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/chicago-bitdevs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chicago-bitdevs/><h6>Chicago Bitdevs</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/coindesk-consensus-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/coindesk-consensus-2016/><h6>Coindesk Consensus</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/coordination-of-decentralized-finance-workshop/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/coordination-of-decentralized-finance-workshop/><h6>Coordination of Decentralized Finance</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/coordination-of-decentralized-finance-workshop/2020-stanford/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/coordination-of-decentralized-finance-workshop/2020-stanford/><h6>2020 Stanford</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/cppcon/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cppcon/><h6>CPPcon</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/cppcon/2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cppcon/2017/><h6>CPPcon 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/cppcon/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cppcon/2020/><h6>CPPcon 2020</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/cryptoeconomic-systems/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cryptoeconomic-systems/><h6>Cryptoeconomic Systems</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/cryptoeconomic-systems/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cryptoeconomic-systems/2019/><h6>Cryptoeconomic Systems 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/dallas-bitcoin-symposium/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/dallas-bitcoin-symposium/><h6>Dallas Bitcoin Symposium</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/decentralized-financial-architecture-workshop/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/decentralized-financial-architecture-workshop/><h6>Decentralized Financial Architecture Workshop</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-developers-miners-meeting-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-developers-miners-meeting-2016/><h6>Developers-Miners Meeting</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/greg-maxwell/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/greg-maxwell/><h6>Greg Maxwell</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/grincon/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/grincon/><h6>Grincon</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/grincon/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/grincon/2019/><h6>Grincon 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/honey-badger-diaries/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/honey-badger-diaries/><h6>Honey Badger Diaries</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/iacr/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/iacr/><h6>IACR Crypto</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/la-bitdevs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/la-bitdevs/><h6>LA Bitdevs</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/layer2-summit/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/layer2-summit/><h6>Layer2 Summit</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/layer2-summit/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/layer2-summit/2018/><h6>Layer2 Summit 2018</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/lets-talk-bitcoin-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lets-talk-bitcoin-podcast/><h6>Lets Talk Bitcoin Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/lightning-conference/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-conference/><h6>Lightning Conference</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/lightning-conference/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-conference/2019/><h6>Lightning Conference 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/lightning-hack-day/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-hack-day/><h6>Lightning Hack Day</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/lightning-specification/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-specification/><h6>Lightning Specification</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/london-bitcoin-devs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/london-bitcoin-devs/><h6>London Bitcoin Devs</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/magicalcryptoconference/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/magicalcryptoconference/><h6>Magicalcryptoconference</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/magicalcryptoconference/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/magicalcryptoconference/2019/><h6>Magicalcryptoconference 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/misc/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/misc/><h6>Misc</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/><h6>MIT Bitcoin Expo</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2015/><h6>Mit Bitcoin Expo 2015</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2016/><h6>Mit Bitcoin Expo 2016</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2017/><h6>Mit Bitcoin Expo 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2018/><h6>Mit Bitcoin Expo 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2019/><h6>Mit Bitcoin Expo 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2020/><h6>Mit Bitcoin Expo 2020</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2021/><h6>Mit Bitcoin Expo 2021</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/munich-meetup/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/munich-meetup/><h6>Munich Meetup</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/noded-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/noded-podcast/><h6>Noded Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/realworldcrypto/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/realworldcrypto/><h6>Realworldcrypto</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/realworldcrypto/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/realworldcrypto/2018/><h6>Realworldcrypto 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/realworldcrypto/2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/realworldcrypto/2021/><h6>Realworldcrypto 2021</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/rebooting-web-of-trust/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/rebooting-web-of-trust/><h6>Rebooting Web Of Trust</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/rebooting-web-of-trust/2019-prague/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/rebooting-web-of-trust/2019-prague/><h6>2019 Prague</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/ruben-somsen/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/ruben-somsen/><h6>Ruben Somsen</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/satoshi-roundtable/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/satoshi-roundtable/><h6>Satoshi Roundtable</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/satoshi-roundtable/sr-004/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/satoshi-roundtable/sr-004/><h6>Sr 004</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/scalingbitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/><h6>Scaling Bitcoin Conference</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/scalingbitcoin/hong-kong-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/hong-kong-2015/><h6>Hong Kong (2015)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/milan-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/milan-2016/><h6>Milan (2016)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/montreal-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/montreal-2015/><h6>Montreal (2015)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/stanford-2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/stanford-2017/><h6>Stanford (2017)</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/scalingbitcoin/stanford-2017/edgeplusplus/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/stanford-2017/edgeplusplus/><h6>Edgeplusplus</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/scalingbitcoin/tel-aviv-2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tel-aviv-2019/><h6>Tel Aviv (2019)</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/scalingbitcoin/tel-aviv-2019/edgedevplusplus/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tel-aviv-2019/edgedevplusplus/><h6>Edgedevplusplus</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/scalingbitcoin/tokyo-2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tokyo-2018/><h6>Tokyo (2018)</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/scalingbitcoin/tokyo-2018/edgedevplusplus/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tokyo-2018/edgedevplusplus/><h6>Edgedevplusplus</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li></ul></li><li data-nav-id=/sf-bitcoin-meetup/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/sf-bitcoin-meetup/><h6>SF Bitcoin Meetup</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/simons-institute/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/simons-institute/><h6>Simons Institute</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/stanford-blockchain-conference/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stanford-blockchain-conference/><h6>Stanford Blockchain</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/stanford-blockchain-conference/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stanford-blockchain-conference/2019/><h6>Stanford Blockchain Conference 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/stanford-blockchain-conference/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stanford-blockchain-conference/2020/><h6>Stanford Blockchain Conference 2020</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/stephan-livera-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stephan-livera-podcast/><h6>Stephan Livera Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/sydney-bitcoin-meetup/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/sydney-bitcoin-meetup/><h6>Sydney Bitcoin Meetup</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/tabconf/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tabconf/><h6>TABConf</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/tabconf/2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tabconf/2021/><h6>TABConf 2021</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/tabconf/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tabconf/2022/><h6>TABConf 2022</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/texas-bitcoin-conference-2014/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/texas-bitcoin-conference-2014/><h6>Texas Bitcoin Conference</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/tftc-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tftc-podcast/><h6>TFTC Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/verifiable-delay-functions/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/verifiable-delay-functions/><h6>Verifiable Delay Functions</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/verifiable-delay-functions/vdf-day-2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/verifiable-delay-functions/vdf-day-2019/><h6>Vdf Day 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/vr-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/vr-bitcoin/><h6>VR Bitcoin</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/w3-blockchain-workshop-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/w3-blockchain-workshop-2016/><h6>W3 Blockchain Workshop</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/wasabi-research-club/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/wasabi-research-club/><h6>Wasabi Research Club</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/what-bitcoin-did-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/what-bitcoin-did-podcast/><h6>What Bitcoin Did Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></div></nav></div><div class="docs-toc large order-lg-2 order-md-0 order-xs-1 col-12 col-lg-2 col-xl-2 position-sticky"><div class=docs-toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#comparing-open-source-development-to-bitcoins-blockchain>Comparing open-source development to bitcoin&rsquo;s blockchain</a></li><li><a href=#code-forks-vs-chain-forks>Code forks vs chain forks</a></li><li><a href=#compatibility>Compatibility</a></li><li><a href=#bip-process>BIP process</a></li><li><a href=#bip123>bip123</a></li><li><a href=#consensus-forks>Consensus forks</a></li><li><a href=#even-satoshi-broke-bitcoin-a-few-times>Even Satoshi broke Bitcoin a few times</a></li><li><a href=#bip-classification>BIP classification</a></li><li><a href=#hard-fork-mania>Hard-fork mania</a></li><li><a href=#a-brief-history-of-bitcoin-forks>A brief history of bitcoin forks</a></li><li><a href=#blockheight-activation>Blockheight activation</a></li><li><a href=#fork-imposing-1-mb-blocksize-limit>Fork: imposing 1 MB blocksize limit</a></li><li><a href=#bip16-pay-to-scripthash-p2sh>bip16 pay-to-scripthash (P2SH)</a></li><li><a href=#soft-forks-vs-hard-forks>Soft-forks vs hard-forks</a></li><li><a href=#non-standardness>Non-standardness</a></li><li><a href=#issupermajority-first-used-miner-activation-mechanism>isSuperMajority: First used miner activation mechanism</a></li><li><a href=#versionbits-bip9>Versionbits (bip9)</a></li><li><a href=#checklocktimeverify>checklocktimeverify</a></li><li><a href=#origin-of-soft-fork-for-segwit>Origin of soft-fork for segwit</a></li><li><a href=#versionbits-in-practice>versionbits in practice</a></li><li><a href=#flag-dates-and-user-activated-soft-forks>Flag dates and user-activated soft-forks</a></li><li><a href=#future-of-soft-fork-activation>Future of soft-fork activation</a></li><li><a href=#interesting-changes-requiring-soft-forks>Interesting changes requiring soft-forks</a></li><li><a href=#potential-changes-requiring-hard-forks>Potential changes requiring hard-forks</a></li><li><a href=#hard-forks-and-inevitable-chain-splits>Hard-forks and inevitable chain splits</a></li><li><a href=#conclusion>Conclusion</a></li><li><a href=#qa>Q&A</a></li></ul></nav></div></div><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-8 py-3"><a href=/>Home</a>
&lt; <a href=/breaking-bitcoin/>Breaking Bitcoin</a>
&lt; <a href=/breaking-bitcoin/2017/>Breaking Bitcoin 2017</a>
&lt; Changing Consensus Rules Without Breaking Bitcoin<h1>Changing Consensus Rules Without Breaking Bitcoin</h1><p><i>Transcript By: Bryan Bishop</i></p><p>Tags:
<a href=/tags/consensus>Consensus</a>, <a href=/tags/forks>Forks</a></p><p>Category:
<a href=/categories/conference>Conference</a></p><p>Changing consensus rules without breaking bitcoin</p><p>Eric Lombrozo (CodeShark)</p><p>video: <a href="https://www.youtube.com/watch?v=0WCaoGiAOHE&t=32min9s">https://www.youtube.com/watch?v=0WCaoGiAOHE&t=32min9s</a></p><p><a href=https://twitter.com/kanzure/status/1005822360321216512>https://twitter.com/kanzure/status/1005822360321216512</a></p><h1 id=introduction>Introduction</h1><p>I&rsquo;d like to talk about &mldr; we actually discovered we can replace the script completely with soft-forks.</p><p>It&rsquo;s important to note this quote from satoshi, from summer 2010: &ldquo;I don&rsquo;t believe a second compatible implementation will ever&rdquo; &mldr;&mldr;</p><h1 id=comparing-open-source-development-to-bitcoins-blockchain>Comparing open-source development to bitcoin&rsquo;s blockchain</h1><p>&mldr; a lot of the inspiration came from the development of open-source. All source code is public, analogous to all blockchain being public. All changes are logged, same as all ledger additions, and subject to audit. The way that git works, our main tool, is by chaining these commitments, using hashes. I&rsquo;ts very similar to a blockchain, except instead of using double sha256 proof-of-work, it&rsquo;s actually proof of actual developer work and people working on code. The typical workflow is to clone the codebase- similar to syncing to the blockchain. And pull requests are similar to broadcasting transactions, you&rsquo;re suggesitng that you are wanting to change the state of the system. Then there&rsquo;s code review (validity), and merging the changes (including the changes in some block or some future block). There&rsquo;s a lot of parallels.</p><h1 id=code-forks-vs-chain-forks>Code forks vs chain forks</h1><p>But there&rsquo;s a huge difference around code forks versus chain forks. It&rsquo;s hugely different. You have these chains, yes, but you also have arrows merging into nodes. We don&rsquo;t have a way in bitcoin to merge two blockchains that have already diverged. There have been some ideas for blockchains that could be able to do this, like DAGs in general, but it&rsquo;s a hard problem to merge different histories and still have the same kind of security that bitcoin has right now.</p><h1 id=compatibility>Compatibility</h1><p>It&rsquo;s important to note changes that affect compatibility. In other code bases, compatibility might not matter. In the case of consensus rules, compatibility matters. Also in other aspects too, such as the p2p network layer. There needs to be some level of compatibility otherwise you get partitions of the network. Bitcoin doesn&rsquo;t work well when you have permanent partitions.</p><h1 id=bip-process>BIP process</h1><p><a href=https://github.com/bitcoin/bips>https://github.com/bitcoin/bips</a></p><p>bip1 <a href=https://github.com/bitcoin/bips/blob/master/bip-0001.mediawiki>https://github.com/bitcoin/bips/blob/master/bip-0001.mediawiki</a></p><p>bip2 <a href=https://github.com/bitcoin/bips/blob/master/bip-0002.mediawiki>https://github.com/bitcoin/bips/blob/master/bip-0002.mediawiki</a></p><p>The BIP process was developed to document proposals and ideas and specifically ideas that involve compatibility issues. If you want to submit code and it doesn&rsquo;t impact compatibility, then it&rsquo;s probably not necessary to submit a BIP. The thing is that different BIPs have different levels of compatibility requirements. This was not really clear in the original way that the BIP process was documented, which is why I worked on bip123, which separates these different kinds of changes.</p><h1 id=bip123>bip123</h1><p>The first distinction I made was the difference between consensus and non-consensus changes. In <a href=https://github.com/bitcoin/bips/blob/master/bip-0123.mediawiki>bip123</a>, there&rsquo;s the consensus layer, the most fundamental level and hardest one to change, and then the peer services layer including message structures and peer discovery which could be upgraded. You could have a migration path where you deprecate older calls and then once nobody is using the old stuff you don&rsquo;t have to support it anymore. Then there&rsquo;s the RPC layer for interfacing with node software at the higher layer, and then there&rsquo;s the application layer for <a href=https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki>bip39</a> or <a href=https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki>bip32</a> where you want to have wallets that share encrypted keys or stuff like that.</p><h1 id=consensus-forks>Consensus forks</h1><p>Consensus forks, you know, split the blockchain and we don&rsquo;t have a merge process in bitcoin. There might be some future ideas in future crytpocurrencies to allow for merging chains together. But for now there&rsquo;s no way to merge incompatible chains. The way iit&rsquo;s resolved is that if the rules and validity are all the same on competing chains then the consensus rule is to follow the chain with the most work. If there&rsquo;s any kind of partition, then as soon as the partition is resolved, then there&rsquo;s a reorg and the chain which has less work is not followed. The history of the chain with the most work becomes the one that is accepted. It resolves temporary partitions, but not permanent partitions. If you have an incompatibility problem at the p2p network layer, and nodes are banning each other and creating a network partition, then this kind of rule isn&rsquo;t going to be able to resolve that partition. It&rsquo;s not going to fix it. Or once it fixes it, you&rsquo;re going to get a really really bad reorg. The great firewall of China suddenly goes up and blocks all bitcoin traffic and then the next morning everyone&rsquo;s transactions are screwed or whatever&mldr;</p><p>Soft-forks guarantee eventual consistency as long as there&rsquo;s majority hashrate enforcing the new rules. Hard-forks can create permanent partitions. This is all basic stuff. This is obvious now. We&rsquo;re aware of it now, that hard-forks always split the chain unless the legacy chain is either abandoned or destroyed. I think that in 2017, we can all look at this and say yes and we&rsquo;ve seen plenty of examples of this phenomena. This wasn&rsquo;t obvious back when Satoshi was writing those earlier posts.</p><h1 id=even-satoshi-broke-bitcoin-a-few-times>Even Satoshi broke Bitcoin a few times</h1><p>Before we all knew this, Satoshi introduced hard-forks and broke consensus. I don&rsquo;t think this is well known. Cory Fields found this commit <a href=https://github.com/bitcoin/bitcoin/commit/757f0769d8360ea043f469f3a35f6ec204740446>757f0769d8360ea043f469f3a35f6ec204740446</a> and informed me of it. I wasn&rsquo;t aware of it. There was actually a hard-fork in bitcoin that Satoshi did that we would never do it this way- it&rsquo;s a pretty bad way to do it. If you look at the git commit description here, he says something about reverted makefile.unix wx-config version 0.3.6. Right. That&rsquo;s all it says. It has no indication that it has a breaking change at all. He was basically hiding it in there. He also <a href="https://bitcointalk.org/index.php?topic=626.msg6451#msg6451">posted to bitcointalk</a> and said, please upgrade to 0.3.6 ASAP. We fixed an implementation bug where it is possible that bogus transactions can be displayed as accepted. Do not accept bitcoin payments until you upgrade to 0.3.6. If you can&rsquo;t upgrade right away, then it would be best to shutdown your bitcoin node until you do. And then on top of that, I don&rsquo;t know why he decided to do this as well, he decided to add some optimizations in the same code. Fix a bug and add some optimizations.. okay, well, he did it.</p><p>One of the interesting things about this commit which isn&rsquo;t really described in Satoshi&rsquo;s bitcointalk post is the addition of the OP_NOP opcodes. Before, they were just illegal. If this was found by the script interpreter then it would exit false and fail. And now they basically don&rsquo;t do anything, they are just NOPs. This is technically a hard-fork that he introduced ((if any transaction was to use these, and or if any transaction in the past had used these in a way that breaks the chain given the new rules, especially since this was not phased in with an activation height or grandfather clause)). The previous rule was that they were illegal. Because now transactions that would have been invalid before are now valid. At the time, nobody was using the NOPs so it probably didn&rsquo;t effect anyone ((that we know about&ndash; someone might have had a pre-signed transaction that was not broadcasted that used the previous features)). The network was really small and probably everyone knew each other that was running a node. So it was easy to get everyone to upgrade quickly. Nobody seemed to care.</p><p>There was a genius to this: by doing this hard-fork, it actually enabled future soft-forks. We can now repurpose these NOPs to do other things. I&rsquo;ll get into that in a second.</p><h1 id=bip-classification>BIP classification</h1><p>Early BIPs had no classification. It&rsquo;s hard to really prioritize them or see which ones might be more difficult to review if you just look at them by name. By adding bip123, it makes it more clear which ones are consensus-critical. <a href=https://github.com/bitcoin/bips/blob/master/bip-0016.mediawiki>bip16</a>, <a href=https://github.com/bitcoin/bips/blob/master/bip-0017.mediawiki>bip17</a> and <a href=https://github.com/bitcoin/bips/blob/master/bip-0018.mediawiki>bip18</a> are touching consensus-critical code. The URI scheme is probably very localized to a single unit that is easy to review. So it makes it much easier to know what to expect in terms of how hard it is going to be to review a particular BIP.</p><p>Some of these over here are later BIPs. We see that&ndash; we have several soft-forks that were actually deployed, and other stuff that was not soft-forks like peer services changes that were added. And then over here, we see consensus changes are easy to spot. I&rsquo;m not going to get into this story too much, but <a href=https://github.com/bitcoin/bips/blob/master/bip-0064.mediawiki>bip64</a> is not a consensus change. This was the reason that bitcoinXT was created actually. There was a dispute. Bitcoin Core developers did not believe that the <a href=https://github.com/bitcoin/bips/blob/master/bip-0064.mediawiki>getutxo</a> feature should be at the p2p level. It was not a consensus change. It became a much more serious situation later on with the whole block size thing which I&rsquo;ll get into in a second. Here you can see it&rsquo;s easy to see which particular BIPs are probably&ndash; need to be reviewed more rigorously.</p><h1 id=hard-fork-mania>Hard-fork mania</h1><p>In 2015-2016 there was this hard-fork craze that came about. There was a whole bunch of BIP submissions about hard-forks. None of these were actually deployed. But it&rsquo;s interesting to note that there was this period of time that there was such a mania for hard-forks. During this time it&rsquo;s also interesting to note that people were still working on some ideas for soft-forks.</p><p>There were some breakthrough discoveries about things that we could do with soft-forks that we didn&rsquo;t think were possible or that we thought were really hard to do. It was a generalization of what kinds of things could we add to the protocol using only soft-forks. It might be obvious now, but it wasn&rsquo;t always.</p><h1 id=a-brief-history-of-bitcoin-forks>A brief history of bitcoin forks</h1><p>The first set of forks were all activated by basically just updating the software. There was no activation mechanism coordinated or whatever. Satoshi would just say hey I released a new version, install it and don&rsquo;t send bitcoin until everyone has upgraded. This works well when you have a network with only like ten machines. It doesn&rsquo;t work very well when you have a network with thousands or millions of machines. It&rsquo;s really hard to get everyone to upgrade all at once. ((Also, there are security reasons why it&rsquo;s very important to not include auto-updating code everywhere.))</p><p>That didn&rsquo;t work so well. But that&rsquo;s the example of 0.3.6 that Satoshi did. That was done that way.</p><h1 id=blockheight-activation>Blockheight activation</h1><p>After that, it was decided that using blockheight as an activation trigger would be better because it would give people some time to upgrade their software so it wouldn&rsquo;t be right away. Satoshi&rsquo;s 1 megabyte blocksize limit in September 2010 was an example of this where it was using the blockheight to activate the rule.</p><p>It&rsquo;s also possible to activate with a flag date using the median time. This made it easier to predict when it would happen. This was used for bip16 and bip30 deployment.</p><h1 id=fork-imposing-1-mb-blocksize-limit>Fork: imposing 1 MB blocksize limit</h1><p>In 2010, Satoshi added the 1 megabyte block size limit. This was an early soft-fork attempt. It was hardcoding a particular blockheight and if it&rsquo;s above that blockheight then enforce it and if not, don&rsquo;t. It assumes that everyone has upgraded their software by this time. This was the first crude mechanism which wasn&rsquo;t just wait until everyone upgrades and don&rsquo;t send transactions until then.</p><h1 id=bip16-pay-to-scripthash-p2sh>bip16 pay-to-scripthash (P2SH)</h1><p>And then came <a href=https://github.com/bitcoin/bips/blob/master/bip-0016.mediawiki>bip16</a>, right. And bip16 started to use other mechanisms like for instance like the anyonecanspend idea where old nodes would accept the transactions as valid and new nodes could have new rules on that and you could add functionality to this. This idea was reapplied in segwit and it made a comeback in a pretty strong way.</p><h1 id=soft-forks-vs-hard-forks>Soft-forks vs hard-forks</h1><p>By this time the distinction between hard and soft forks started to congeal. At the beginning there was not a good distinction. But there was a post from gavinandresen where he said there are &ldquo;soft-rule changes and hard rule changes.. soft rule changes tighten up the rules, old software will accept all the blocks created by new software, but the oppsoite might not be true. Soft changes do not require everyone to upgrade. Hard changes modify the rules in a way that un-upgraded software considers illegal. At this point it is hard to deploy hard changes and they require every merchant and miner to upgrade&rdquo;. It was appreciated at this point that it was a difficult problem. And then a few years later, I guess gavinandresen didn&rsquo;t think it was that hard anymore.</p><h1 id=non-standardness>Non-standardness</h1><p>Then there other recommendations like &ldquo;consider transactions non-standard&rdquo; if it has an unknown version number. You would bump the transaction version number. You could still include such a transaction in a block, but it wouldn&rsquo;t propagate over the p2p network. This would reduce the risk of sending transactions that might not validate correctly if some nodes aren&rsquo;t validating the nodes correctly.</p><h1 id=issupermajority-first-used-miner-activation-mechanism>isSuperMajority: First used miner activation mechanism</h1><p>This was around the first time that miner activation concept was invented or started to be used. Track the last number of blocks, the last 1000 blocks, if a certain number of them signal a higher block version then you know miners are going to be enforcing a new rule and then it&rsquo;s time to upgrade if you want to be safe. Unfortunately there&rsquo;s a lot of issues with this. If ther&rsquo;es a cooperative scenario where the incentives with the miners are aligned then it helps to make a smooth transition. When the miners and user interests are not aligned hten there can be a lot of problems here, such as false signaling, validationless mining&mldr; just because someone is signaling something doesn&rsquo;t mean anything in particular. Miners might signal for a change but after activation they could trivially choose not to enforce it. And then there&rsquo;s this 95% threshold warning which indicates hey something might be up. isSuperMajority used 95% as a safety threshold. I think that unfortnuately this established a narrative that miners are the ones that are able to change the protocol. This was the first time that it was provided and it was to smooth out the process. It wasn&rsquo;t politicized at this point because most of the soft-forks at the time&mldr; there weren&rsquo;t any conflicts or obvious conflicts there.</p><p>We had this super majority mechanism which incremented the block version but you could only deploy one soft-fork at a time. You&rsquo;re stuck on that one, and then what do you do if it doesn&rsquo;t get activated? 3 different soft-forks deployed that way: bip34, bip65, and bip66.</p><h1 id=versionbits-bip9>Versionbits (bip9)</h1><p><a href=https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki>Versionbits bip9</a> was developed after that, with the idea that we want to be able to deploy multiple soft-forks at the same time. When I first got into bitcoin, I thought bitcoin would get obsolete, some better tech would come around and it would be better structured and I didn&rsquo;t see an upgrade path for bitcoin that could remain backwards compatible. When we started to look into versionbits, I thought hey this is a version upgrade path where we could actually add new features and deploy multiple soft-forks simultaneously and maybe we could even scale up the process a little bit. We did 2&ndash; we did the <a href=https://github.com/bitcoin/bips/blob/master/bip-0065.mediawiki>checklocktimeverify bip65</a> + <a href=https://github.com/bitcoin/bips/blob/master/bip-0112.mediawiki>checksequenceverify bip112</a> bundle, and then came <a href=http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/segregated-witness-and-its-impact-on-scalability/>segwit</a>, and segwit is where everything changed.</p><h1 id=checklocktimeverify>checklocktimeverify</h1><p>In checklocktimeverify (<a href=https://github.com/bitcoin/bips/blob/master/bip-0065.mediawiki>bip65</a>), the transaction version is bumped, which indicates it&rsquo;s going to be using this new feature potentially. And there&rsquo;s new rules. It&rsquo;s basically redefining NOP2 which Satoshi enabled with the hard-fork he did before. Had Satoshi not done that hard-fork, then there wouldn&rsquo;t be NOP2 available, and it wouldn&rsquo;t have been possible to implement checklocktimeverify like that. Old nodes treat it as a NOP (no operation).</p><p>This is an example script: notice that if OP_CHECKLOCKTIMEVERIFY is a NOP then the script interpreter just drops the entire line after the ELSE and that&rsquo;s how old nodes would evaluate the script.</p><h1 id=origin-of-soft-fork-for-segwit>Origin of soft-fork for segwit</h1><p>In this context, of seeing all these interesting developments happening with soft-forks, I thought it would be neat if we could have a more abstract soft-forking framework like a plugin kind of thing where rather than having a few people reviewing every single soft-fork proposal that everyone makes then instead have a screening process and modularize it more so that it&rsquo;s possible to have more unit tests and a clear execution pathway. I proposed this idea. We were concerned about the sequence of rules.. so if there&rsquo;s a set of rules that need to be checked and it doesn&rsquo;t matter in what order you can check them, then you can just chain all the different soft-forks. I thought this would be a good way to generalize this, the execution flow is easy to follow this architecture, and it&rsquo;s encapsulated (chat log exercept: &ldquo;the execution flow is even easier to follow with this kind of architecture&rdquo; and &ldquo;because in the stable consensus code itself the specifics of the rule are encapsulated&rdquo; and &ldquo;and in the rule definition itself there&rsquo;s nothing else BUT the rule definition&rdquo; and some comments about extension blocks). So the rule definition could be this module that whoever wrote it could write unit tests for it and just make sure it works perfectly.</p><p>And then luke-jr just out of the blue as a matter of fact, it was pretty crazy, he just said to me, say a soft-fork for segregated witness. And I was like, could we really do that with a soft-fork? At this point, Pieter Wuille had been working on a segwit implement for the Elements Alpha project and it was there done as a hard-fork and even gmaxwell didn&rsquo;t think it would be possible to do this as a soft-fork. And according to luke-jr it was obvious that it would be doable as a soft-fork and he blurted out the answer. Note that sipa is Pieter Wuille. I was skeptical about this and luke-jr said in theory it should be possible and sipa was wondering, well, how do you do that? He said it probably entails p2p changes&mldr; we could do it with external data blobs and blocks like extension blocks.</p><p>Luke-Jr mentioned that it could be done like p2sh&rsquo;s mechanism in bip16. The changes in transactions referring to each other&mldr; so you have to make the transaction not contain scriptsigs. That was the lightbulb moment. It took another 2 weeks for it to sink in. I was just trying to do a simple soft-fork plugin thing and I did not expect segwit to come out of this. I was just thinking about consensus structure and luke-jr ends by breaking soft-fork plugins and then he runs off to bed. This was the end of that chat.</p><p>I recently looked this up for a new article that Aaron van Wirdum published in bitcoinmagazine where he looks over the <a href=https://bitcoinmagazine.com/articles/long-road-segwit-how-bitcoins-biggest-protocol-upgrade-became-reality/>history of segwit</a>. I was trying to find the original chat history for this and just looking back at this it was funny because at this point none of has had realized what we had stumbled across. It wasn&rsquo;t until a few weeks later that we realized what we found. This happened between the <a href=http://diyhpl.us/wiki/transcripts/scalingbitcoin/>Montreal</a> and <a href=http://diyhpl.us/wiki/transcripts/scalingbitcoin/hong-kong/>Hong Kong</a> <a href=https://scalingbitcoin.org/>scaling bitcoin conferences</a>. At Hong Kong we didn&rsquo;t have the transaction malleability fix yet and people wanted bigger blocks and lightning and this solved all these things and we were able to do it with a soft-fork. It totally changed the roadmap at this point.</p><p>Eventually came the segregated witness segwit BIPs. There were 7 of them. Only 4 of them here are consensus. bip142 was replaced by <a href=https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki>bip173</a> (<a href=https://diyhpl.us/wiki/transcripts/sf-bitcoin-meetup/2017-03-29-new-address-type-for-segwit-addresses/>bech32</a>) that sipa has been working on.</p><h1 id=versionbits-in-practice>versionbits in practice</h1><p>Once we had segwit implemented, then we were thinking we&rsquo;d deploy with versionbits bip9 which made the most sense. We talked with some miners and after discussion it seemed that everyone agreed it would be a good idea to deploy this. &mldr;.. bip9 was designed in a way such that instead of incrementing the version every time we do an upgrade, we used different bits in the version number and ew could parallelize this and do multiple upgrades at the same time. Here&rsquo;s the state transition diagram. It was designed to&ndash; if it fails, the failure mode was that nothing changes. Status quo was favored. If miners are not going to signal for it then it just fails after a certain timeout. We did not anticipate other stuff like <a href=http://diyhpl.us/~bryan/papers2/bitcoin/jeremy-rubin-asicboost-notes.pdf>asicboost</a> and other issues that came up. This was assuming that in the worst of cases okay no change stay with status quo. We were happy with this but it caused some problems because miners started to misconstrue this as a vote.. in litecoin, this is segwit signaling in this chart here, and then the price is over here, and you would have to be stupid to not see a correlation here. Miners were starting to get close to the threshold and then drop their hashrate on it. This is an attack vector and it&rsquo;s not sustainable forever.</p><h1 id=flag-dates-and-user-activated-soft-forks>Flag dates and user-activated soft-forks</h1><p>So then we started to think maybe miner-activated soft-forks on their own aren&rsquo;t good enough. Well what about going back to user-activated soft-forks like the flag date? This is when <a href=https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-February/013643.html>shaolinfry</a> <a href=https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-March/013714.html>proposed</a> <a href=https://github.com/bitcoin/bips/blob/master/bip-0148.mediawiki>bip148</a> which required that miners signal segwit. It was kind of like a rube goldberg device where one device triggers another. This was a way to trigger all the nodes already out there ready to activate. And so we did some game theory analysis on this and actually NicolasDorier did some nice diagrams here. Here&rsquo;s the decision tree if you decide not to run a bip148 node&ndash; if the industry or miners decide not to go along with it, thenyou get a chain split and possibly a massive reorg. On the other hand if you do run a bip148 node, then they would have to collude for you to get a permanent chain split. The game theory here- it&rsquo;s a game of chicken yes, and assuming it&rsquo;s not in their interest to do that, then they will opt to not go for the chain split. But if they do split the chain then it will probably be for reasons related to real economic interests like bcash where it&rsquo;s controversial and some people might wonder. My personal take is that I think it would be ineviatable that some miners would have interests that encourage them to have another chain. It didn&rsquo;t really adversely effect bitcoin too much and some of us got free money from bcash so thank you.</p><p>The problem with bip148 is that the segwit2x collusion agreement came up and it was too late to activate with just bip9. James Hilliard proposed a reduction of the activation threshold to 80% using <a href=https://github.com/bitcoin/bips/blob/master/bip-0091.mediawiki>bip91</a>. It was a way to avoid the chain split with the segwit2x collusion agreement, but it did not avoid the chainsplit with the bcash thing which I think it was inevitable at that point. The bcash hard-fork was a separate proposal unrelated to bip91 and bip8.</p><p><a href=https://en.bitcoin.it/wiki/Segwit_support>Some</a> of the Bitcoin Core developers preferred bip8 over bip148. You can see the distinction here. The main difference is that bip8 does not have a transition from the start state to a failed state. In bip8, miners get a chance to signal and activate, but after a certain threshold rather than going to the failed state it goes to the locked in state. This does not allow miners to stall forever or to stall to the point where it fails. But it does still feed the narrative that miners are activating the fork and it still allows miners to stall for a long time. Others weren&rsquo;t too happy about that with bip8.</p><h1 id=future-of-soft-fork-activation>Future of soft-fork activation</h1><p>This is a big dilemma about how we are going to deploy soft-forks in the future. I&rsquo;m really happy that segwit activated because now at least we can see some protocol development in second layer or higher-layer stuff that does not require tinkering with the consensus layer. I think this will usher in more innovation. At some point we&rsquo;re probably going to want to add more features to the bitcoin protocol. This is a big philosophical question we&rsquo;re asking ourselves. Do we do a UASF for the next one? What about a hybrid approach? Miner activated by itself has been ruled out. bip9 we&rsquo;re not going to use again.</p><h1 id=interesting-changes-requiring-soft-forks>Interesting changes requiring soft-forks</h1><p>Near-term soft-forkable changes that people have been looking into include things like: <a href=https://diyhpl.us/wiki/transcripts/blockchain-protocol-analysis-security-engineering/2018/schnorr-signatures-for-bitcoin-challenges-opportunities/>Schnorr signatures</a>, signature aggregation, which is much more efficient than the currently used ECDSA scheme. And MASTs for <a href=https://diyhpl.us/wiki/transcripts/bitcoin-core-dev-tech/2018-03-06-merkleized-abstract-syntax-trees-mast/>merkleized abstract syntax trees</a>, and there are at least two different proposals for this. MAST allows you to compress scripts where there&rsquo;s a single execution pathway that might be taken so you can have this entire tree of potential execution pathways and the proof to authorize a transaction only needs to include one particular leaf of the tree.</p><p>We&rsquo;re looking at <a href=https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-October/015141.html>new script versions</a>. At this point we don&rsquo;t need to do the OP_DROP stuff, we can add new opcodes and a new scripting language or replace it with something that&rsquo;s not a stack machine if we wanted&ndash; not that we want to, but in principle we could replace it with another language. It gives us that option. It&rsquo;s something interesting to think about. Satoshi thought that bitcoin script would be the extensability mechanism to support smart contracts, and now we&rsquo;re looking at the opposite which is that the way the proofs are constructed. Adding new scripting languages turns out to be simple.</p><h1 id=potential-changes-requiring-hard-forks>Potential changes requiring hard-forks</h1><p>Some changes in the future might require a hard-fork. Here are a few that are on the wishlist. Structural changes to the blockheader could allow for adding an extra nonce or chaining headers so you can add more fields or commit to other kinds of data structures, insead of having to stick stuff into the coinbase transaction.</p><p>Withholding attack fixes, proof-of-work changes, things like that.</p><p>Another change that would be nice is splitting the transaction inputs and outputs into separate merkle trees. You could construct much shorter proofs. If you&rsquo;re interested in whether a particular UTXO is in a block, you don&rsquo;t need to download the entire transaction. This would be a nice little feature.</p><p>Also if we do want to increase blocksize then my particular take is that it seems silly to bump it 2x once, and then blocks fill up and then we hard-fork again? Every time we hit the limit we hard-fork again? We might as well add a percent increase per annum and have something where it grows gradually. Agreeing on the exact numbres and timeframe are obviously some areas where it might cause disagreement.</p><h1 id=hard-forks-and-inevitable-chain-splits>Hard-forks and inevitable chain splits</h1><p>Hard-forks might inevitable cause chain splits. I think this is something that we have come to accept. I think that back in 2015, we thought hard-forks might be a way to upgrade the protocol and assume everyone has the incentive to switch. We&rsquo;ve seen several hard-forks now. The ethereum hard-fork is an example where people with different ideologies decided to stick it out and mine the old chain. I think we&rsquo;re going to see that in bitcoin. Even a tiny group of people tha tdon&rsquo;t want change, we&rsquo;re going to see a chain split. I think at this point, avoiding a chain split is not an option, but rather we have to work to mitigate the chain splits. This means including things like <a href=https://github.com/luke-jr/bips/blob/bip-noreplay/bip-noreplay.mediawiki>replay protection</a>, using different address formats, protecting SPV clients, things like that. Market mechanisms and price discovery, liquidity, trying to see whether or not the market actually supports the changes.</p><p>Are there situations where the legacy chain will be voluntarily abandoned? I think if we were doing a hard-fork that was a win for everyone and maybe just some guy that just hasn&rsquo;t connected to bitcoin in years and has a node that he hasn&rsquo;t spun up&mldr; there&rsquo;s going to be a few of these people out there. There could be a hard-fork where everyone agrees, but still the logistics and coordination is difficult and it probably needs to be done with a lot of anticipation and some mechanism to mitigate any kind of issues there.</p><p>Is it practical or ethical to kill the legacy chain? My personal belief is that as long as people want to use the chain, even a few people, then attacking the chain (like mining empty blocks indefinitely) is tantamount to attacking people&rsquo;s personal property. I think this could be a serious problem.</p><p>If both chains survive, which one gets to keep the brand? This is the multi-billion dollar question. My personal view is that whoever is proposing the change, the onus is on them to demonstrate widespread support. The people who want to keep the status quo don&rsquo;t have to demonstrate anything. The change needs to demonstrate overwhelming support.</p><h1 id=conclusion>Conclusion</h1><p>I&rsquo;m not sure how things are going to develop now. We&rsquo;ve learned a lot in the past few years. Hopefully we will be able to do at least a few more upgrades. If not, then I&rsquo;m happy we got segwit in so that we can start to do second layer stuff.</p><h1 id=qa>Q&A</h1><p><a href="https://www.youtube.com/watch?v=0WCaoGiAOHE&t=1h8m10s">https://www.youtube.com/watch?v=0WCaoGiAOHE&t=1h8m10s</a></p><p>Q: What about the research going on <a href=https://bitcoinhardforkresearch.github.io/>spoonnet</a> and spoonnet2 for hard-forks?</p><p>A: There&rsquo;s a lot of interesting stuff there. jl2012 has been working on interesting stuff there. I think that at the end of the day there&rsquo;s still going to be political issues even if you have a technical solution to the logistical issues&mldr; if you can&rsquo;t get people to agree, then you&rsquo;re still going to have problems. But it&rsquo;s good to have ideas for replay protection. If you&rsquo;re going to split, then split for good, and make sure there&rsquo;s no way to merge again, and make sure you have a good way of coordinating that. This doesn&rsquo;t fix the political aspects though.</p><div class=row></div></div></div></div><script src=https://btctranscripts.com/lib/jquery.min.js></script>
<script src=https://btctranscripts.com/lib/popper.min.js></script>
<script src=https://btctranscripts.com/js/bootstrap.min.js></script>
<script type=text/javascript src=/plugins/lunr.min.js></script>
<script type=text/javascript src=/plugins/auto-complete.js></script>
<link href=/plugins/auto-complete.css rel=stylesheet><script type=text/javascript>var baseurl="https://btctranscripts.com/"</script><script type=text/javascript src=/plugins/search.js></script>
<script type=text/javascript src=https://btctranscripts.com/js/custom.js></script>
<script type=text/javascript src=/plugins/clipboard.js></script>
<script>new ClipboardJS(".btn")</script></body></html>