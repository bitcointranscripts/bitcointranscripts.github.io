<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical href=https://btctranscripts.com/es/bitcoin-core-dev-tech/2023-04/2023-04-27-assumeutxo/><title>AssumeUTXO update | Transcripciones de ₿itcoin
</title><link href=https://btctranscripts.com/css/fontawesome.min.css rel=stylesheet><link rel=stylesheet href=https://btctranscripts.com/css/ace.min.css><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://btctranscripts.com/images/btctranscripts.png"><meta name=twitter:title content="James O'Beirne - AssumeUTXO update"><meta name=twitter:description content="Objetivos permitir a los nodos obtener un conjunto utxo rápidamente (1h) al mismo tiempo, sin grandes concesiones en materia de seguridad Enfoque Proporcionar instantánea utxo serializada obtener primero la cadena de cabeceras, cargar la instantánea y deserializar, sincronizar con la punta a partir de ahí a continuación, iniciar la verificación de fondo con una segunda instantánea por último, comparar los hashes cuando el IBD en segundo plano llega a la base de la instantánea Actualización del progreso se ha hecho mucha refactorización; se ha introducido ChainStateManager, se han eliminado globals, se ha refactorizado mempool / blockstorage cambios en la lógica de init / shutdown se han fusionado cambios en la cartera realizados cambios p2p aún en revisión (por ejemplo, la elección de la cadena de estado a la que añadir nuevos bloques) Cuestiones pendientes El orden nFile se fragmenta, posibles problemas con la poda y/o reindexación -> Introducir contador nFile de blockfile por tipos de chainstate (cambio simple)"><script async src=https://visits.bitcoindevs.xyz/script.js data-website-id=06384ada-7f1c-44c2-a6d9-d830fb23e122></script></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id=navbarMain><div class=container><div><a class=navbar-brand href=/es>Transcripciones de ₿itcoin</a></div><div class="collapse navbar-collapse" id=navbarMainCollapse><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/en>en</a></li><li class=nav-item><a class=nav-link href=/pt>pt</a></li><li class=nav-item><a class=nav-link href=/zh>zh</a></li><li class=nav-item><a class=nav-link href=https://github.com/bitcointranscripts/bitcointranscripts target=_blank><i class='fab fa-github'></i></a></li></ul></div></div></nav><div class="alert alert-warning fade show sticky-banner" role=alert><strong><a href=https://review.btctranscripts.com target=_blank data-umami-event=click-banner>Get paid to review technical Bitcoin transcripts
</a></strong><button type=button class=close data-dismiss=alert aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=container-fluid><div class=row><div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0"><button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#sidenav-left-collapse aria-controls=sidenav-left-collapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse align-items-start flex-column" id=sidenav-left-collapse><form class="form-inline my-2 my-lg-0 searchbox"><input class="form-control mr-sm-2 w-100" data-search-input id=search-by type=text placeholder='Search (press "/")'></form><ul class="navbar-nav flex-column pt-3"><li data-nav-id=/es/advancing-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/advancing-bitcoin/><h6>Advancing Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/es/advancing-bitcoin/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/advancing-bitcoin/2019/><h6>Advancing Bitcoin 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/advancing-bitcoin/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/advancing-bitcoin/2020/><h6>Advancing Bitcoin 2020</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/es/andreas-antonopoulos/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/andreas-antonopoulos/><h6>Andreas Antonopoulos</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/austin-bitcoin-developers/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/austin-bitcoin-developers/><h6>Austin Bitcoin Developers</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/baltic-honeybadger/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/baltic-honeybadger/><h6>Baltic Honeybadger</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/es/baltic-honeybadger/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/baltic-honeybadger/2018/><h6>Baltic Honeybadger 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/baltic-honeybadger/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/baltic-honeybadger/2019/><h6>Baltic Honeybadger 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/es/bit-block-boom/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bit-block-boom/><h6>Bit Block Boom</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/es/bit-block-boom/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bit-block-boom/2019/><h6>Bit Block Boom 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/es/bitcoin-core-dev-tech/ class="nav-item my-1 parent haschildren"><a class="nav-link p-0" href=/es/bitcoin-core-dev-tech/><h6>Bitcoin Core Dev Tech</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/es/bitcoin-core-dev-tech/2015-02/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bitcoin-core-dev-tech/2015-02/><h6>Bitcoin Core Dev Tech 2015</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/bitcoin-core-dev-tech/2017-09/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bitcoin-core-dev-tech/2017-09/><h6>Bitcoin Core Dev Tech 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/bitcoin-core-dev-tech/2018-03/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bitcoin-core-dev-tech/2018-03/><h6>Bitcoin Core Dev Tech 2018 (Mar)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/bitcoin-core-dev-tech/2018-10/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bitcoin-core-dev-tech/2018-10/><h6>Bitcoin Core Dev Tech 2018 (Oct)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/bitcoin-core-dev-tech/2019-06/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bitcoin-core-dev-tech/2019-06/><h6>Bitcoin Core Dev Tech 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/bitcoin-core-dev-tech/2022-10/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bitcoin-core-dev-tech/2022-10/><h6>Bitcoin Core Dev Tech 2022</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/bitcoin-core-dev-tech/2023-04/ class="nav-item my-1 parent haschildren"><a class="nav-link p-0" href=/es/bitcoin-core-dev-tech/2023-04/><h6>Bitcoin Core Dev Tech 2023 (Apr)</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/es/bitcoin-explained/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bitcoin-explained/><h6>Bitcoin Explained</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/bitcoin-magazine/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/bitcoin-magazine/><h6>Bitcoin Magazine</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/greg-maxwell/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/greg-maxwell/><h6>Greg Maxwell</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/lets-talk-bitcoin-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/lets-talk-bitcoin-podcast/><h6>Lets Talk Bitcoin Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/misc/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/misc/><h6>Misc</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/es/chaincode-residency/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/es/chaincode-residency/><h6>Residencia de Chaincode</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></div></nav></div><div class="docs-toc large order-lg-2 order-md-0 order-xs-1 col-12 col-lg-2 col-xl-2 position-sticky"><div class=docs-toc><nav id=TableOfContents><ul><li><ul><li><a href=#objetivos>Objetivos</a></li><li><a href=#enfoque>Enfoque</a></li><li><a href=#actualización-del-progreso>Actualización del progreso</a></li><li><a href=#cuestiones-pendientes>Cuestiones pendientes</a></li><li><a href=#poda>Poda</a></li><li><a href=#indexación>Indexación</a></li><li><a href=#planteamiento-de-la-discusión>Planteamiento de la discusión</a></li></ul></li></ul></nav></div></div><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-8 py-3"><a href=/>Home</a>
&lt; <a href=/es/bitcoin-core-dev-tech/>Bitcoin Core Dev Tech
</a>&lt; <a href=/es/bitcoin-core-dev-tech/2023-04/>Bitcoin Core Dev Tech 2023 (Apr)
</a>&lt; <a href=/es/bitcoin-core-dev-tech/2022-10/>Bitcoin Core Dev Tech 2022
</a>&lt; <a href=/es/bitcoin-core-dev-tech/2019-06/>Bitcoin Core Dev Tech 2019
</a>&lt; <a href=/es/bitcoin-core-dev-tech/2018-10/>Bitcoin Core Dev Tech 2018 (Oct)
</a>&lt; <a href=/es/bitcoin-core-dev-tech/2018-03/>Bitcoin Core Dev Tech 2018 (Mar)
</a>&lt; <a href=/es/bitcoin-core-dev-tech/2017-09/>Bitcoin Core Dev Tech 2017
</a>&lt; <a href=/es/bitcoin-core-dev-tech/2015-02/>Bitcoin Core Dev Tech 2015
</a>&lt; <a href=/es/bitcoin-explained/>Bitcoin Explained
</a>&lt; <a href=/es/misc/>Misc
</a>&lt; <a href=/es/bitcoin-magazine/>Bitcoin Magazine
</a>&lt; <a href=/es/andreas-antonopoulos/>Andreas Antonopoulos
</a>&lt; <a href=/es/austin-bitcoin-developers/>Austin Bitcoin Developers
</a>&lt; <a href=/es/advancing-bitcoin/>Advancing Bitcoin
</a>&lt; <a href=/es/baltic-honeybadger/>Baltic Honeybadger
</a>&lt; <a href=/es/chaincode-residency/>Residencia de Chaincode
</a>&lt; <a href=/es/lets-talk-bitcoin-podcast/>Lets Talk Bitcoin Podcast
</a>&lt; <a href=/es/greg-maxwell/>Greg Maxwell
</a>&lt; <a href=/es/bit-block-boom/>Bit Block Boom
</a>&lt; AssumeUTXO update<h1>AssumeUTXO update</h1><p>Oradores:
<a href=/es/speakers/james-obeirne>James O'Beirne</a></p><p><i>Fecha: April 27, 2023</i></p><p><i>Traducción Por: Blue Moon</i></p><p>Tags:
<a href=/es/tags/bitcoin-core>Bitcoin core</a>, <a href=/es/tags/assumeutxo>Assumeutxo</a></p><h2 id=objetivos>Objetivos</h2><ul><li>permitir a los nodos obtener un conjunto utxo rápidamente (1h)</li><li>al mismo tiempo, sin grandes concesiones en materia de seguridad</li></ul><h2 id=enfoque>Enfoque</h2><ul><li>Proporcionar instantánea utxo serializada</li><li>obtener primero la cadena de cabeceras, cargar la instantánea y deserializar, sincronizar con la punta a partir de ahí</li><li>a continuación, iniciar la verificación de fondo con una segunda instantánea</li><li>por último, comparar los hashes cuando el IBD en segundo plano llega a la base de la instantánea</li></ul><h2 id=actualización-del-progreso>Actualización del progreso</h2><ul><li>se ha hecho mucha refactorización; se ha introducido <code>ChainStateManager</code>, se han eliminado globals, se ha refactorizado mempool / blockstorage</li><li>cambios en la lógica de init / shutdown se han fusionado</li><li>cambios en la cartera realizados</li><li>cambios p2p aún en revisión (por ejemplo, la elección de la cadena de estado a la que añadir nuevos bloques)</li></ul><h2 id=cuestiones-pendientes>Cuestiones pendientes</h2><p>El orden <code>nFile</code> se fragmenta, posibles problemas con la poda y/o reindexación -> Introducir contador nFile de blockfile por tipos de chainstate (cambio simple)</p><h2 id=poda>Poda</h2><ul><li>actualmente, objetivo de poda con ventana final</li><li>hacer lo mismo, pero con dos puntas - diferentes posibilidades para conseguirlo</li></ul><h2 id=indexación>Indexación</h2><p>las señales <code>validationinterface</code> son recogidas por los índices</p><ul><li><p>podría construir fuera de orden, pero algunos índices (coinstats) no puede ser construido fuera de orden</p></li><li><p>solución sencilla: desactivar todos los índices hasta que se complete la sincronización</p></li><li><p>solución sofisticada: desactivar sólo algunos indexadores</p></li><li><p>Introducir rpc para cargar chainstate</p></li><li><p>Poner hashes assumeutxo reales en chainparams</p></li><li><p>En total, sólo ~ 1k loc izquierda, aunque la mayoría en lugares importantes</p></li></ul><h2 id=planteamiento-de-la-discusión>Planteamiento de la discusión</h2><ul><li>¿Realmente necesitamos la sincronización en segundo plano?</li><li>No hacer la sincronización en segundo plano es más simple, pero cambia los supuestos de seguridad.</li><li>Además, se eliminaría la necesidad de que cada nodo debe ser capaz de sincronizar la cadena</li></ul><h4></h4><ul><li><a href=/bitcoin-core-dev-tech/2023-04/2023-04-27-assumeutxo/>en: AssumeUTXO update</a></li></ul><div class=row></div></div></div></div><script src=https://btctranscripts.com/lib/jquery.min.js></script><script src=https://btctranscripts.com/lib/popper.min.js></script><script src=https://btctranscripts.com/js/bootstrap.min.js></script><script type=text/javascript src=/plugins/lunr.min.js></script><script type=text/javascript src=/plugins/auto-complete.js></script><link href=/plugins/auto-complete.css rel=stylesheet><script type=text/javascript>var baseurl="https://btctranscripts.com//es"</script><script type=text/javascript src=/plugins/search.js></script><script type=text/javascript src=https://btctranscripts.com/js/custom.js></script><script type=text/javascript src=/plugins/clipboard.js></script><script>new ClipboardJS(".btn")</script></body></html>