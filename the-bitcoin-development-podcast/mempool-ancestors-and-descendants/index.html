<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical href=https://btctranscripts.com/the-bitcoin-development-podcast/mempool-ancestors-and-descendants/><title>Mempool Ancestors and Descendants | ₿itcoin Transcripts
</title><link href=https://btctranscripts.com/css/fontawesome.min.css rel=stylesheet><link rel=stylesheet href=https://btctranscripts.com/css/ace.min.css><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://btctranscripts.com/images/btctranscripts.png"><meta name=twitter:title content="John Newbery, Gloria Zhao - Mempool Ancestors and Descendants"><meta name=twitter:description content="John and Gloria continue their discussion of Bitcoin&rsquo;s mempool by explaining parent, child, ancestor and descendant transactions."><script async src=https://visits.bitcoindevs.xyz/script.js data-website-id=06384ada-7f1c-44c2-a6d9-d830fb23e122></script></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id=navbarMain><div class=container><div><a class=navbar-brand href=/>₿itcoin Transcripts</a></div><div class="collapse navbar-collapse" id=navbarMainCollapse><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/es>es</a></li><li class=nav-item><a class=nav-link href=/pt>pt</a></li><li class=nav-item><a class=nav-link href=/zh>zh</a></li><li class=nav-item><a class=nav-link href=https://github.com/bitcointranscripts/bitcointranscripts target=_blank><i class='fab fa-github'></i></a></li></ul></div></div></nav><div class="alert alert-warning fade show sticky-banner" role=alert><strong><a href=https://review.btctranscripts.com target=_blank data-umami-event=click-banner>Get paid to review technical Bitcoin transcripts
</a></strong><button type=button class=close data-dismiss=alert aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=container-fluid><div class=row><div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0"><button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#sidenav-left-collapse aria-controls=sidenav-left-collapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse align-items-start flex-column" id=sidenav-left-collapse><form class="form-inline my-2 my-lg-0 searchbox"><input class="form-control mr-sm-2 w-100" data-search-input id=search-by type=text placeholder='Search (press "/")'></form><ul class="navbar-nav flex-column pt-3"><li data-nav-id=/adopting-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/adopting-bitcoin/><h6>Adopting Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/adopting-bitcoin/2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/adopting-bitcoin/2021/><h6>Adopting Bitcoin 2021</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/adopting-bitcoin/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/adopting-bitcoin/2022/><h6>Adopting Bitcoin 2022</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/advancing-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/><h6>Advancing Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/advancing-bitcoin/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2019/><h6>Advancing Bitcoin 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/advancing-bitcoin/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2020/><h6>Advancing Bitcoin 2020</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/advancing-bitcoin/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2022/><h6>Advancing Bitcoin 2022</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/advancing-bitcoin/2023/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/advancing-bitcoin/2023/><h6>Advancing Bitcoin 2023</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/andreas-antonopoulos/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/andreas-antonopoulos/><h6>Andreas Antonopoulos</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/austin-bitcoin-developers/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/austin-bitcoin-developers/><h6>Austin Bitcoin Developers</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/baltic-honeybadger/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/baltic-honeybadger/><h6>Baltic Honeybadger</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/baltic-honeybadger/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/baltic-honeybadger/2018/><h6>Baltic Honeybadger 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/baltic-honeybadger/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/baltic-honeybadger/2019/><h6>Baltic Honeybadger 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bit-block-boom/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bit-block-boom/><h6>Bit Block Boom</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bit-block-boom/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bit-block-boom/2019/><h6>Bit Block Boom 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bitcoin-2024/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-2024/><h6>Bitcoin 2024 Nashville</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-core-dev-tech/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/><h6>Bitcoin Core Dev Tech</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bitcoin-core-dev-tech/2015-02/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/2015-02/><h6>Bitcoin Core Dev Tech 2015</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-core-dev-tech/2017-09/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/2017-09/><h6>Bitcoin Core Dev Tech 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-core-dev-tech/2018-03/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/2018-03/><h6>Bitcoin Core Dev Tech 2018 (Mar)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-core-dev-tech/2018-10/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/2018-10/><h6>Bitcoin Core Dev Tech 2018 (Oct)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-core-dev-tech/2019-06/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/2019-06/><h6>Bitcoin Core Dev Tech 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-core-dev-tech/2022-10/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/2022-10/><h6>Bitcoin Core Dev Tech 2022</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-core-dev-tech/2023-04/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/2023-04/><h6>Bitcoin Core Dev Tech 2023 (Apr)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-core-dev-tech/2023-09/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/2023-09/><h6>Bitcoin Core Dev Tech 2023 (Sept)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-core-dev-tech/2024-04/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-core-dev-tech/2024-04/><h6>Bitcoin Core Dev Tech 2024 (Apr)</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/edgedevplusplus/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/edgedevplusplus/><h6>Bitcoin Edge Dev++</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/edgedevplusplus/2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/edgedevplusplus/2017/><h6>Bitcoin Edge Dev++ 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/edgedevplusplus/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/edgedevplusplus/2018/><h6>Bitcoin Edge Dev++ 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/edgedevplusplus/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/edgedevplusplus/2019/><h6>Bitcoin Edge Dev++ 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bitcoin-explained/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-explained/><h6>Bitcoin Explained</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-magazine/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-magazine/><h6>Bitcoin Magazine</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-review-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-review-podcast/><h6>Bitcoin Review Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoinplusplus/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinplusplus/><h6>Bitcoin++</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/bitcoinplusplus/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinplusplus/2022/><h6>Bitcoin++ 2022</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoinplusplus/layer-2/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinplusplus/layer-2/><h6>Layer 2</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoinplusplus/onchain-privacy/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinplusplus/onchain-privacy/><h6>Onchain Privacy</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/bitcoinology/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoinology/><h6>Bitcoinology</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/blockchain-protocol-analysis-security-engineering/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockchain-protocol-analysis-security-engineering/><h6>Blockchain Protocol Analysis Security Eng</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/blockchain-protocol-analysis-security-engineering/2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockchain-protocol-analysis-security-engineering/2017/><h6>Blockchain Protocol Analysis Security Engineering 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/blockchain-protocol-analysis-security-engineering/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockchain-protocol-analysis-security-engineering/2018/><h6>Blockchain Protocol Analysis Security Engineering 2018</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/blockstream-webinars/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/blockstream-webinars/><h6>Blockstream Webinars</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/boltathon/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/boltathon/><h6>Boltathon</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/breaking-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/breaking-bitcoin/><h6>Breaking Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/breaking-bitcoin/2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/breaking-bitcoin/2017/><h6>Breaking Bitcoin 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/breaking-bitcoin/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/breaking-bitcoin/2019/><h6>Breaking Bitcoin 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/building-on-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/building-on-bitcoin/><h6>Building On Bitcoin</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/building-on-bitcoin/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/building-on-bitcoin/2018/><h6>Building On Bitcoin 2018</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/chaincode-residency/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chaincode-residency/><h6>Chaincode Residency</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/chicago-bitdevs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chicago-bitdevs/><h6>Chicago Bitdevs</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/coindesk-consensus-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/coindesk-consensus-2016/><h6>Coindesk Consensus</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/coordination-of-decentralized-finance-workshop/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/coordination-of-decentralized-finance-workshop/><h6>Coordination of Decentralized Finance</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/coordination-of-decentralized-finance-workshop/2020-stanford/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/coordination-of-decentralized-finance-workshop/2020-stanford/><h6>2020 Stanford</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/c-lightning/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/c-lightning/><h6>Core Lightning Developer Call</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/cppcon/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cppcon/><h6>CPPcon</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/cppcon/2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cppcon/2017/><h6>CPPcon 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/cppcon/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cppcon/2020/><h6>CPPcon 2020</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/cryptoeconomic-systems/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cryptoeconomic-systems/><h6>Cryptoeconomic Systems</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/cryptoeconomic-systems/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/cryptoeconomic-systems/2019/><h6>Cryptoeconomic Systems 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/dallas-bitcoin-symposium/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/dallas-bitcoin-symposium/><h6>Dallas Bitcoin Symposium</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/decentralized-financial-architecture-workshop/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/decentralized-financial-architecture-workshop/><h6>Decentralized Financial Architecture Workshop</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/bitcoin-developers-miners-meeting-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/bitcoin-developers-miners-meeting-2016/><h6>Developers-Miners Meeting</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/greg-maxwell/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/greg-maxwell/><h6>Greg Maxwell</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/grincon/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/grincon/><h6>Grincon</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/grincon/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/grincon/2019/><h6>Grincon 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/honey-badger-diaries/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/honey-badger-diaries/><h6>Honey Badger Diaries</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/iacr/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/iacr/><h6>IACR Crypto</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/la-bitdevs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/la-bitdevs/><h6>LA Bitdevs</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/layer2-summit/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/layer2-summit/><h6>Layer2 Summit</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/layer2-summit/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/layer2-summit/2018/><h6>Layer2 Summit 2018</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/learning-bitcoin-and-design/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/learning-bitcoin-and-design/><h6>Learning Bitcoin and Design</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/lets-talk-bitcoin-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lets-talk-bitcoin-podcast/><h6>Lets Talk Bitcoin Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/lightning-conference/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-conference/><h6>Lightning Conference</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/lightning-conference/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-conference/2019/><h6>Lightning Conference 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/lightning-hack-day/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-hack-day/><h6>Lightning Hack Day</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/lightning-specification/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/lightning-specification/><h6>Lightning Specification</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/london-bitcoin-devs/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/london-bitcoin-devs/><h6>London Bitcoin Devs</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/magicalcryptoconference/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/magicalcryptoconference/><h6>Magicalcryptoconference</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/magicalcryptoconference/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/magicalcryptoconference/2019/><h6>Magicalcryptoconference 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/misc/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/misc/><h6>Misc</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/><h6>MIT Bitcoin Expo</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2015/><h6>MIT Bitcoin Expo 2015</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2016/><h6>MIT Bitcoin Expo 2016</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2017/><h6>MIT Bitcoin Expo 2017</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2018/><h6>MIT Bitcoin Expo 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2019/><h6>MIT Bitcoin Expo 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2020/><h6>MIT Bitcoin Expo 2020</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2021/><h6>MIT Bitcoin Expo 2021</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2022/><h6>MIT Bitcoin Expo 2022</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/mit-bitcoin-expo/mit-bitcoin-expo-2024/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/mit-bitcoin-expo/mit-bitcoin-expo-2024/><h6>MIT Bitcoin Expo 2024</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/munich-meetup/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/munich-meetup/><h6>Munich Meetup</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/noded-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/noded-podcast/><h6>Noded Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/potzblitz/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/potzblitz/><h6>Potzblitz! - The weekly Lightning talk</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/realworldcrypto/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/realworldcrypto/><h6>Realworldcrypto</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/realworldcrypto/2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/realworldcrypto/2018/><h6>Realworldcrypto 2018</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/realworldcrypto/2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/realworldcrypto/2021/><h6>Realworldcrypto 2021</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/rebooting-web-of-trust/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/rebooting-web-of-trust/><h6>Rebooting Web Of Trust</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/rebooting-web-of-trust/2019-prague/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/rebooting-web-of-trust/2019-prague/><h6>2019 Prague</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/ruben-somsen/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/ruben-somsen/><h6>Ruben Somsen</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/satoshi-roundtable/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/satoshi-roundtable/><h6>Satoshi Roundtable</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/satoshi-roundtable/sr-004/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/satoshi-roundtable/sr-004/><h6>Sr 004</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/scalingbitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/><h6>Scaling Bitcoin Conference</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/scalingbitcoin/hong-kong-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/hong-kong-2015/><h6>Hong Kong (2015)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/milan-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/milan-2016/><h6>Milan (2016)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/montreal-2015/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/montreal-2015/><h6>Montreal (2015)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/stanford-2017/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/stanford-2017/><h6>Stanford (2017)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/tel-aviv-2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tel-aviv-2019/><h6>Tel Aviv (2019)</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/scalingbitcoin/tokyo-2018/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/scalingbitcoin/tokyo-2018/><h6>Tokyo (2018)</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/sf-bitcoin-meetup/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/sf-bitcoin-meetup/><h6>SF Bitcoin Meetup</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/simons-institute/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/simons-institute/><h6>Simons Institute</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/stanford-blockchain-conference/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stanford-blockchain-conference/><h6>Stanford Blockchain</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/stanford-blockchain-conference/2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stanford-blockchain-conference/2019/><h6>Stanford Blockchain Conference 2019</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/stanford-blockchain-conference/2020/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stanford-blockchain-conference/2020/><h6>Stanford Blockchain Conference 2020</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/stephan-livera-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/stephan-livera-podcast/><h6>Stephan Livera Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/sydney-bitcoin-meetup/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/sydney-bitcoin-meetup/><h6>Sydney Bitcoin Meetup</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/tabconf/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tabconf/><h6>TABConf</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/tabconf/2021/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tabconf/2021/><h6>TABConf 2021</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/tabconf/2022/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tabconf/2022/><h6>TABConf 2022</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/texas-bitcoin-conference-2014/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/texas-bitcoin-conference-2014/><h6>Texas Bitcoin Conference</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/tftc-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/tftc-podcast/><h6>TFTC: A Bitcoin Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/the-bitcoin-development-podcast/ class="nav-item my-1 parent haschildren"><a class="nav-link p-0" href=/the-bitcoin-development-podcast/><h6>The Bitcoin Development Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/chaincode-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/chaincode-podcast/><h6>The Chaincode Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/ux-research/ class="nav-item my-1"><a class="nav-link p-0" href=/ux-research/><h6>UX Research Calls</h6></a></li><li data-nav-id=/verifiable-delay-functions/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/verifiable-delay-functions/><h6>Verifiable Delay Functions</h6></a><ul class="list-unstyled ml-2"><li data-nav-id=/verifiable-delay-functions/vdf-day-2019/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/verifiable-delay-functions/vdf-day-2019/><h6>Vdf Day 2019</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></li><li data-nav-id=/vr-bitcoin/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/vr-bitcoin/><h6>VR Bitcoin</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/w3-blockchain-workshop-2016/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/w3-blockchain-workshop-2016/><h6>W3 Blockchain Workshop</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/wasabi-research-club/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/wasabi-research-club/><h6>Wasabi Research Club</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/wasabi-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/wasabi-podcast/><h6>Wasabikas Bitcoin Privacy Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li><li data-nav-id=/what-bitcoin-did-podcast/ class="nav-item my-1 haschildren"><a class="nav-link p-0" href=/what-bitcoin-did-podcast/><h6>What Bitcoin Did Podcast</h6></a><ul class="list-unstyled ml-2"></ul></li></ul></div></nav></div><div class="docs-toc large order-lg-2 order-md-0 order-xs-1 col-12 col-lg-2 col-xl-2 position-sticky"><div class=docs-toc><nav id=TableOfContents><ul><li><ul><li><a href=#parent-and-child-transactions>Parent and child transactions</a></li><li><a href=#relevance-of-ancestors-and-descendants-to-the-mempool>Relevance of ancestors and descendants to the mempool</a></li><li><a href=#reasons-transactions-leave-the-mempool>Reasons transactions leave the mempool</a></li><li><a href=#block-construction-considerations-for-miners>Block construction considerations for miners</a></li><li><a href=#full-node-performance-considerations>Full node performance considerations</a></li><li><a href=#child-pays-for-parent-and-missing-inputs>Child pays for parent and missing inputs</a></li></ul></li></ul></nav></div></div><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-8 py-3"><a href=/>Home</a>
&lt; <a href=/the-bitcoin-development-podcast/>The Bitcoin Development Podcast
</a>&lt; Mempool Ancestors and Descendants<h1>Mempool Ancestors and Descendants</h1><p>Speakers:
<a href=/speakers/john-newbery>John Newbery</a>, <a href=/speakers/gloria-zhao>Gloria Zhao</a></p><p><i>Date: November 24, 2021</i></p><p><i>Transcript By: kouloumos via tstbtc v1.0.0 --needs-review</i></p><p>Tags:
<a href=/tags/cpfp>Cpfp</a></p><p>Media:
<a href=https://podcasters.spotify.com/pod/show/bitcoinbrink/episodes/Mempool-Ancestors-and-Descendants-e1ald5e>https://podcasters.spotify.com/pod/show/bitcoinbrink/episodes/Mempool-Ancestors-and-Descendants-e1ald5e</a></p><div class="alert alert-warning"><div class=ai-generated><i class='fas fa-robot'></i>
<span>AI-Generated Transcript</span></div><span>Review this transcript and earn sats. </span><a href=https://review.btctranscripts.com target=_blank data-umami-event=click-transcript-banner>Learn More ></a></div><h2 id=parent-and-child-transactions>Parent and child transactions</h2><p>Speaker 0: 00:00:00</p><p>Hi John.</p><p>Speaker 1: 00:00:01</p><p>Hi Gloria.</p><p>Speaker 0: 00:00:02</p><p>Feel like talking about mempool ancestors and descendants today?</p><p>Speaker 1: 00:00:06</p><p>Yeah, let&rsquo;s do it.</p><p>Speaker 0: 00:00:06</p><p>All right.
Let&rsquo;s define ancestors and descendants first.
Or maybe let&rsquo;s define parents and children first.</p><p>Speaker 1: 00:00:13</p><p>Okay.
So in Bitcoin, when you have a transaction, you have the person or the owner spending the coin, sending it to someone who&rsquo;s receiving it.
And we define that relationship by the sender puts a public key or a hash of a public key in the output and the person receiving it, when they come to spend it again, they put a signature into the input.
That goes all the way back to the white paper where Satoshi says, we define an electronic coin as a chain of digital signatures.
Each owner transfers the coin to the next by digitally signing a hash of the previous transaction on the public key of the next owner and adding these to the end of the coin.
So Toshi&rsquo;s talking about a chain actually is a bit more complex than that because it&rsquo;s more like a graph because a transaction can have multiple inputs and multiple outputs.
Right.
So your transaction has outputs and then when you come to spend those outputs, they become inputs in the next transaction.
And we define that relationship as one transaction spending the outputs created by the previous transaction as a child-parent relationship.
So the transaction spending the output is the child and the transaction that&rsquo;s created in the first place is the parent.</p><p>Speaker 0: 00:01:26</p><p>Right.
And one parent can fund many children and many parents can be consolidated into one child.</p><p>Speaker 1: 00:01:33</p><p>Yeah, exactly.
So the blockchain is simply a kind of a transcript or a log of everything that&rsquo;s happened before and it contains all of the transactions.
And those transactions have this structure which in computer science we call a graph and more specifically a directed graph because we have that direction relationship and even more specifically a&mldr;</p><p>Speaker 0: 00:01:53</p><p>Directed acyclic graph.</p><p>Speaker 1: 00:01:56</p><p>Exactly.
Exactly.
Because a transaction cannot be its own parent or its own ancestor.
So we talked about parent-children there.
We can extend that relationship and talk about a parent of a parent being an ancestor.
So all parents and all parents of parents and all parents of parents of parents are ancestors and descendants in the opposite direction.
So a child is a descendant, a child is a child and so on.</p><p>Speaker 0: 00:02:18</p><p>And why is this relevant in a mempool?</p><p>Speaker 1: 00:02:22</p><p>Good question.</p><h2 id=relevance-of-ancestors-and-descendants-to-the-mempool>Relevance of ancestors and descendants to the mempool</h2><p>Speaker 1: 00:02:23</p><p>Well, so far we&rsquo;ve been talking about this kind of abstract idea of ancestors and descendants and it&rsquo;s all a little bit academic and maybe doesn&rsquo;t seem that interesting.
And in the blockchain, it&rsquo;s not really that interesting.
It&rsquo;s just kind of historic artifact.
All we care about is the set of unspent outputs.
But in the mempool, we do care about it a lot because unlike the blockchain, which is basically finalized and static, You know, there can be reorgs, but as you go deeper into the blockchain, that&rsquo;s all fixed.
The mempool is very different.
It&rsquo;s always changing.
It&rsquo;s very dynamic.
Things are being added, things are being removed.
And so we need to care about the shape and the properties of this graph when we&rsquo;re adding and removing things.</p><p>Speaker 0: 00:03:03</p><p>Yeah.
So we always want the mempool to have the best candidates for inclusion in the block by fee.</p><p>Speaker 1: 00:03:09</p><p>That&rsquo;s right.</p><p>Speaker 0: 00:03:10</p><p>And transactions leave the mempool two ways, either they&rsquo;re mine, included in block, or we&rsquo;re evicting them in favor of a different transaction to be added to the mempool.</p><p>Speaker 1: 00:03:22</p><p>Well, there are more ways than that, actually.</p><p>Speaker 0: 00:03:24</p><p>Or they&rsquo;re expired or conflicted.</p><p>Speaker 1: 00:03:27</p><p>Exactly.
So there&rsquo;s several ways that a transaction can leave the mempool, and there&rsquo;s a couple of ways it can enter the mempool.
So maybe we should kind of enumerate those.
The most obvious way for a transaction to enter the mempool is that you receive it from a peer on the peer-to-peer network.
You validate that transaction, all of the outputs that it&rsquo;s spending exist, it&rsquo;s a valid transaction and you pop it in your mempool and send it to your peers.</p><p>Speaker 0: 00:03:50</p><p>Or it can come from your clients.</p><p>Speaker 1: 00:03:52</p><p>Or it can come from a local application, yep, your wallet or some other RPC client, yep.</p><p>Speaker 0: 00:03:57</p><p>Right.
And it can leave either because it is invalid or you don&rsquo;t want it anymore or it goes into a block, essentially.</p><p>Speaker 1: 00:04:07</p><p>I&rsquo;m not sure I&rsquo;d agree with the first one.
If it&rsquo;s invalid, it would never be put into the mempool.</p><p>Speaker 0: 00:04:11</p><p>Invalid as in like it got conflicted because of transaction to block, for example.</p><h2 id=reasons-transactions-leave-the-mempool>Reasons transactions leave the mempool</h2><p>Speaker 1: 00:04:16</p><p>Right, So let&rsquo;s enumerate those ways that it can leave the mempool.
The most obvious is that it gets included in a block.
So the mempool is this holding area for transactions that might get included in a block, and then you receive a block and hey presto, it actually does have that transaction.
You don&rsquo;t need to keep it in your mempool anymore.
Closely linked to that is you might get a block that contains a conflicting transaction.
So you&rsquo;ve got transaction A in your mempool, you receive a block, it&rsquo;s called A2, that spends the same outputs and that&rsquo;s now part of the blockchain and A is no longer valid.
I think that&rsquo;s what you were referring to earlier.
That&rsquo;s called a conflict or it conflicts with something in a block and we have to remove that from the mempool.
Next up we have eviction.
So we remove transactions from the mempool for a couple of reasons.
One is the mempool&rsquo;s got too full and we remove the transactions that have the lowest fee rate or more specifically the lowest ancestor fee rate, descendant fee rate.
Descendant fee rate.
Descendant fee rate, that&rsquo;s right, because they&rsquo;re the least likely to be useful for a miner in future.
So as we shed transactions from the mempool, we remove those ones first.
Another reason we remove transactions from the mempool is if they&rsquo;ve been hanging around for too long.
So if a transaction&rsquo;s been in the mempool for two weeks, we will expire it.</p><p>Speaker 0: 00:05:31</p><p>Do we do that even when we&rsquo;re not full?</p><p>Speaker 1: 00:05:33</p><p>Yep.
And what else?
We might replace it.
So bit 125, replace by fee, defines some policy rules that we would use where if we receive a transaction on the peer-to-peer network that conflicts with a transaction in the mempool or some transactions in the mempool, we may replace those transactions with a new one if it meets certain criteria.</p><p>Speaker 0: 00:05:55</p><p>Someone asked me if there&rsquo;s a way for a node operator to manually remove a transaction from the mempool.</p><p>Speaker 1: 00:06:01</p><p>There is not.</p><p>Speaker 0: 00:06:02</p><p>I think there&rsquo;s a way that you could do it if you prioritised negative max money.
It would get evicted the next time you did any kind of mempool trimming.</p><p>Speaker 1: 00:06:15</p><p>Okay, yep.</p><p>Speaker 0: 00:06:16</p><p>Oh, if it&rsquo;s full.
If it&rsquo;s not full, I think it might still stay.</p><p>Speaker 1: 00:06:19</p><p>Yeah.
Assuming the mempool&rsquo;s full, it removes stuff from the bottom.
And so deprioritizing a transaction would send it to the bottom.</p><p>Speaker 0: 00:06:26</p><p>Yeah.
And you could, in the Bitcoin core wallet, abandon transaction and then it&rsquo;ll stop rebroadcasting it.
And then it would naturally, hopefully, come out of the mempool.</p><p>Speaker 1: 00:06:36</p><p>Potentially but what you need to keep in mind is that your mempool is not necessarily reflective of the rest of the network&rsquo;s mempool.
So once it&rsquo;s out, once a transaction has been broadcast to your peers and they&rsquo;ve transitively broadcast it to their peers and it&rsquo;s gone out into the network, it&rsquo;s going to be there forever more unless it gets conflicted with something that&rsquo;s included in the blockchain.
Yeah.
Okay.</p><h2 id=block-construction-considerations-for-miners>Block construction considerations for miners</h2><p>Speaker 1: 00:06:58</p><p>So those are ways that transactions can be removed from the mempool.
And then maybe we should mention when a miner is creating a block, they&rsquo;re selecting transactions from the mempool.
So they&rsquo;re not removing them yet because they haven&rsquo;t been put in the block.
But when they&rsquo;re constructing that block, they will choose transactions from the mempool based on the ancestor fee rate, because they&rsquo;re trying to maximize the amount of fee that they put in their block.</p><p>Speaker 0: 00:07:20</p><p>Should we break that down?
Why exactly it&rsquo;s ancestor fee rate and not descendant or base?</p><p>Speaker 1: 00:07:25</p><p>So transactions in the mempool can spend outputs of transactions in the blockchain, But you can also have, like we talked about, children and descendants.
So you could have transactions in the mempool spending the outputs of other transactions in the mempool.
So you have this directed graph, which is all the transactions that have ever existed included in the blockchain.
And then right at the edge of that, the very top or the bottom, depending on how you&rsquo;re looking at it, you have some unspent transaction outputs, UTXOs, and then you have your graph of transactions in the mempool that kind of extends the graph of confirmed transactions.
So when a miner is looking at which transactions to include, they want to include ones which have high fee, but those transactions with high fee might have ancestors in the mempool, they might be spending the outputs of other transactions, they&rsquo;re dependent on other transactions in the mempool.
And those other transactions have low fee.
So to include the transaction with high fee, you also need to include first the transaction with low fee, because the blockchain has to be ordered.
You can&rsquo;t spend a transaction output that does not yet exist.</p><p>Speaker 0: 00:08:30</p><p>Exactly.</p><p>Speaker 1: 00:08:31</p><p>So that&rsquo;s how a miner looks at the transactions in the mempool and decides which ones to include in a block.
They look at the ancestor fee rate because to get the descendant, they need to include all of the ancestors first.
And so this is where we come back to the graph theory because this is quite a difficult problem to solve optimally.
We have heuristics for selecting what we think is a very good block, but if we wanted to exhaustively search the space of all potential blocks, that would be a very computationally intensive task.
So we have these heuristics that kind of range over that graph and try and find a good set of transactions to maximize the fee.
And so we need the graph to have some structure and be able to tractably walk over that graph.</p><p>Speaker 0: 00:09:18</p><p>Yeah, and when you&rsquo;re a miner and you&rsquo;re constructing a block template, you care about the speed at which you construct that template more than the extra 100 megabytes to store that ancestor and descendant data, because you want to get started on the next block as soon as possible.</p><p>Speaker 1: 00:09:35</p><p>Exactly.
Yeah.
So you mentioned that ancestor and descendant data.
So the mempool is not simply just a pool of transactions.
We also include some metadata And that metadata is things like the ancestor fee rates of a transaction.</p><p>Speaker 0: 00:09:49</p><p>Yeah.
And iterators to said parents and children.
I think if you have a mempool with 300 megabytes of storage available, Only about one fourth of that is the raw transaction data itself and the rest is metadata.
And a lot of people are really surprised to hear that, but it is important information that needs to be stored because we&rsquo;re preferring to use space instead of time.</p><p>Speaker 1: 00:10:18</p><p>Right.
And going back, why do miners care about the time it takes to construct a block?
Because all of that time that they spend constructing a block is wasted time.
So if it&rsquo;s a 10 minute interblock interval, and so 600 seconds, and it takes them six seconds to construct a block.
That&rsquo;s 1% of revenue that they are just leaving on the table.</p><p>Speaker 0: 00:10:39</p><p>Yeah, exactly.</p><p>Speaker 1: 00:10:41</p><p>And not 1% of profit.
It&rsquo;s a much higher percentage of profit because obviously they have their overheads and their profit margin is pretty slim anyway.
So these small increments really count to the miners.</p><p>Speaker 0: 00:10:52</p><p>And is that why sometimes we see empty blocks?</p><p>Speaker 1: 00:10:55</p><p>That is why we sometimes see empty blocks because&mldr;</p><p>Speaker 0: 00:10:58</p><p>One possible reason.</p><p>Speaker 1: 00:10:59</p><p>It&rsquo;s one possible reason.
So if a miner receives a block at the tip, they might start doing work immediately before validating that block, before updating their mempool to remove the transactions in their block, in that block.
So they can start work without doing the computation of constructing a block.</p><p>Speaker 0: 00:11:17</p><p>Yeah, but they still want a block with transactions because of the fees.</p><p>Speaker 1: 00:11:22</p><p>They prefer to, yeah, that&rsquo;s an incentive.</p><p>Speaker 0: 00:11:24</p><p>Yeah.</p><p>Speaker 1: 00:11:24</p><p>So they might start mining with an empty block and then update the template.
Yeah.
As they&rsquo;ve done that computational work.</p><p>Speaker 0: 00:11:31</p><p>But they essentially have to start all over again, searching the non-space.</p><p>Speaker 1: 00:11:35</p><p>Well every single hash is starting all over again.
You don&rsquo;t make any progress.
So it doesn&rsquo;t make any difference that they&rsquo;ve already done some work.
Every time you hash something you&rsquo;re starting from scratch.
You&rsquo;re no closer.</p><h2 id=full-node-performance-considerations>Full node performance considerations</h2><p>Speaker 1: 00:11:46</p><p>Okay, so we have this graph and we care about performance as you search through it.
Miners care about performance, but also other full nodes on the network care about performance because they are also doing updates to their mempool.
So for example, a bit 125 replacement transaction might push out a bunch of transactions from the mempool.
You might have a chain of transactions, A, B, C, D, E, and then A2 conflicts with A, and so you then need to remove B, C, D, E as well as removing A, because say now they depend on something that&rsquo;s no longer in the mempool.</p><p>Speaker 0: 00:12:21</p><p>Exactly.
They&rsquo;re invalid.</p><p>Speaker 1: 00:12:23</p><p>Yeah, they&rsquo;re invalid in that mempool if A2 is in there.</p><p>Speaker 0: 00:12:27</p><p>This sounds like a good time to talk about why we evict by descendant score rather than ancestor score.</p><p>Speaker 1: 00:12:35</p><p>Okay, that&rsquo;s a good thing to talk about.
So why do we do that?</p><p>Speaker 0: 00:12:38</p><p>Well, intuitively it seems like, okay, we want to mine by ancestor score, so why don&rsquo;t we also evict by ancestor score?
But you can have a low ancestor score yet a very high fee child, for example.
So like the most concrete example would be ABC is a chain where C spends B and B spends A, and A has a very low fee.
I don&rsquo;t know, maybe B has a medium fee and C has an extremely high fee.
So C has a very high ancestor score.</p><p>Speaker 1: 00:13:15</p><p>And A has a very low ancestor score because it&rsquo;s not spending any unspent, unconfirmed transactions.</p><p>Speaker 0: 00:13:22</p><p>But A has a very high descendant score.</p><p>Speaker 1: 00:13:25</p><p>Exactly, right.</p><p>Speaker 0: 00:13:27</p><p>So we don&rsquo;t want to evict this chain, essentially.
Then you can imagine D, which spends C, but has a very low fee.
And we can take D off the chain because we don&rsquo;t need it to mine any of the other transactions.
We only need A and B in order to get C.</p><p>Speaker 1: 00:13:46</p><p>Right.
So we care about the performance of these algorithms, both in selecting transactions to include in a block and also updating the mempool when you have conflicting transactions or replacement transactions or anything moving that graph, changing the contents of the mempool.
And so to make that tractable, we have limits on the size of that graph.
Specifically those limits are in terms of the ancestor count and ancestor size, and descendant count and descendant size.
So for a transaction to be put in the mempool, it can&rsquo;t have more than 25 ancestors, including itself, so 24 true ancestors.
And the sum of the sizes of itself and the ancestors can be no greater than 101 kilobytes.
And by adding that transaction to the mempool, it can&rsquo;t make any of the existing transactions in the mempool have descendants or packages of descendants that exceed those same limits, 25 and 101.
And so that limits the size of packages and families of transactions in the mempool.</p><p>Speaker 0: 00:14:54</p><p>Right.
And these are default limits.
You can configure them as a node operator to be whatever you want, but 25 and 101 kilobytes is the default.</p><p>Speaker 1: 00:15:06</p><p>Yeah.
And that&rsquo;s generally enough for most people.
There might be circumstances where services or exchanges are doing a batch withdrawal and they have lots of customers withdrawing Bitcoin to their private addresses at the same time, they would need to be wary of those limits because they could run into those if they&rsquo;re creating large transactions and those customers are then using those unconfirmed outputs in their transactions.</p><p>Speaker 0: 00:15:30</p><p>Right.
Yeah.
I&rsquo;ve heard of enterprise wallets doing a big fee bump where say they have like 30 customers, outgoing transactions floating in the mempool and they want to add some urgency to that.
So they try to go and fee bump all 30 of them and then they hit the too long mempool chain error.
They&rsquo;re like, what&rsquo;s going on?
But also if you were to increase the limit on your own node, that doesn&rsquo;t necessarily mean that it&rsquo;ll propagate to other nodes.</p><p>Speaker 1: 00:15:59</p><p>Right.</p><p>Speaker 0: 00:16:00</p><p>Because their mempools will reject because they have that limit as well.</p><p>Speaker 1: 00:16:04</p><p>Right.
And that&rsquo;s the thing about policy that to some extent it doesn&rsquo;t matter too much what your own policy is.
It matters what the rest of the network&rsquo;s policy is in terms of transaction propagation.</p><h2 id=child-pays-for-parent-and-missing-inputs>Child pays for parent and missing inputs</h2><p>Speaker 1: 00:16:14</p><p>Yeah.
So you have these concepts of ancestors and descendants.
We talked about ancestor fee rate.
So if you have transaction A with a low fee rate and B with a high fee rate, B is incentivizing the miner to include A and B.
And that is used in a technique called Child Pays for Parent.
So if I have a transaction that is unconfirmed in the mempool, it&rsquo;s got a low fee, but I really want it to be confirmed, I can spend one of the outputs in a transaction with a very high fee rate and the miner would then be incentivized to include transaction A and B.
But sometimes that doesn&rsquo;t work because A itself has a fee rate that&rsquo;s too low to get into the mempool.</p><p>Speaker 0: 00:16:52</p><p>Oh, we&rsquo;re getting into this.</p><p>Speaker 1: 00:16:53</p><p>We&rsquo;re getting into this.</p><p>Speaker 0: 00:16:54</p><p>This is like my favorite topic to talk about.</p><p>Speaker 1: 00:16:58</p><p>Okay, well, let&rsquo;s talk about it a bit then.
So imagine I have a transaction A, I want to spend some of A, but it has a very low fee rate, let&rsquo;s say one satoshi per byte.
And the mempool, network mempools are congested and they&rsquo;ve been expiring or evicting transactions from the bottom of their mempool and they won&rsquo;t accept transactions below five satoshis per byte.
So I want A to be included.
I&rsquo;ve created now a new transaction B with 100 satoshis per byte.
So I&rsquo;ve done child pays for parent.
And then what happens?</p><p>Speaker 0: 00:17:29</p><p>You get the error for A saying, sorry, this doesn&rsquo;t meet the minimum mempool fee requirement.
And you&rsquo;re like, wait, wait, wait, but what about B?
And it&rsquo;ll say missing inputs because it&rsquo;s spending something that it doesn&rsquo;t know about.
It&rsquo;s like, I did tell you about A and you rejected it, But here, basically you want the node to validate A and B together.</p><p>Speaker 1: 00:17:50</p><p>Right.
So the way into the mempool, it&rsquo;s a narrow door.
Only one transaction can go through at a time and they need to be assessed serially.
So A comes up, doesn&rsquo;t have the entry fee, gets told to go away.
B comes up and is told, well, you&rsquo;re spending outputs that don&rsquo;t exist.</p><p>Speaker 0: 00:18:05</p><p>Yeah.
And someone asked me a very good question of like, oh, why don&rsquo;t we look at the transaction candidates in order of their fee rate?
And the answer to that is, well, you don&rsquo;t know the fee rate until you have all of the information.
So in Bitcoin transactions, you don&rsquo;t include the amount in the inputs.
You only include the amount in the outputs.
So the way to calculate a fee amount is you need to find the total inputs and then the total outputs and you subtract them.
But you don&rsquo;t know the input amounts until you go and look up the outputs that they&rsquo;re spending.
And therefore you have to validate transactions in order of like parents before children.
You can&rsquo;t go in order of fee because you don&rsquo;t know until you do it that way.</p><p>Speaker 1: 00:18:52</p><p>Okay.
So how can you fix that?</p><p>Speaker 0: 00:18:54</p><p>Well, maybe we can widen the door and let in multiple transactions at a time.</p><p>Speaker 1: 00:18:59</p><p>That Sounds like a great idea.</p><p>Speaker 0: 00:19:01</p><p>Yeah.
What about just two at a time?</p><p>Speaker 1: 00:19:03</p><p>Two at a time.
OK.
Well, let&rsquo;s talk about that next time.</p><p>Speaker 0: 00:19:06</p><p>Oh, OK.</p><p>Speaker 1: 00:19:06</p><p>There&rsquo;s a little teaser for the next episode.
All right.
Thanks, Gloria.</p><p>Speaker 0: 00:19:10</p><p>Thanks, John.
Bye.</p><div class=row></div></div></div></div><script src=https://btctranscripts.com/lib/jquery.min.js></script><script src=https://btctranscripts.com/lib/popper.min.js></script><script src=https://btctranscripts.com/js/bootstrap.min.js></script><script type=text/javascript src=/plugins/lunr.min.js></script><script type=text/javascript src=/plugins/auto-complete.js></script><link href=/plugins/auto-complete.css rel=stylesheet><script type=text/javascript>var baseurl="https://btctranscripts.com/"</script><script type=text/javascript src=/plugins/search.js></script><script type=text/javascript src=https://btctranscripts.com/js/custom.js></script><script type=text/javascript src=/plugins/clipboard.js></script><script>new ClipboardJS(".btn")</script></body></html>